focus_tree = {
	id = KPD_focus_tree
	shared_focus = TCA_invite_foreign_investors
	shared_focus = GEAF_Mefo_return
	shared_focus = GE1_start_focus
	shared_focus = GE2_start_focus
	continuous_focus_position = {
		x = 130
		y = 900
	}
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = KPD
		}
	}
	focus = {
		#육군 수립
		id = KPD_establishing_an_army
		icon = GFX_goal_generic_army_doctrines
		cost = 10
		x = 5
		y = 0
		available = {
			NOT = { has_war_with = TRM }
		}
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			army_experience = 25
			add_dynamic_modifier = {
				modifier = KPD_army_dynamic_modifier
			}
			hidden_effect = {
				country_event = {
					id = KPD_event.13
					days = 10
				}
			}
		}
	}
	focus = {
		#독일의 붉은 군대
		id = KPD_germany_red_army
		icon = GFX_focus_SOV_mobilization_plan
		cost = 5
		prerequisite = {
			focus = KPD_establishing_an_army
		}
		mutually_exclusive = {
			focus = KPD_prussian_army
		}
		available = {
		}
		relative_position_id = KPD_establishing_an_army
		x = -1
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			hidden_effect = {
				remove_dynamic_modifier = {
					modifier = KPD_army_dynamic_modifier
				}
				add_dynamic_modifier = {
					modifier = KPD_the_red_army_dynamic_modifier
				}
			}
			add_to_variable = {
				KPD_army_mobilization_speed = 0.05
			}
			add_to_variable = {
				KPD_army_army_org_factor = -0.05
			}
			add_to_variable = {
				KPD_army_experience_gain_army_factor = -0.1
			}
			add_to_variable = {
				KPD_army_experience_loss_factor = -0.15
			}
			add_to_variable = {
				KPD_army_mobilization_laws_cost_factor = -0.2
			}
			custom_effect_tooltip = KPD_germany_red_army_tt
			add_political_power = 60
		}
	}
	focus = {
		#프로이센 군국주의
		id = KPD_prussian_army
		icon = GFX_focus_ger_oppose_hitler
		cost = 5
		prerequisite = {
			focus = KPD_establishing_an_army
		}
		mutually_exclusive = {
			focus = KPD_germany_red_army
		}
		available = {
		}
		relative_position_id = KPD_establishing_an_army
		x = 1
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			hidden_effect = {
				remove_dynamic_modifier = {
					modifier = KPD_army_dynamic_modifier
				}
				add_dynamic_modifier = {
					modifier = KPD_prussian_army_dynamic_modifier
				}
			}
			add_to_variable = {
				KPD_army_mobilization_speed = -0.05
			}
			add_to_variable = {
				KPD_army_conscription = 0.01
			}
			add_to_variable = {
				KPD_army_army_org_factor = 0.05
			}
			add_to_variable = {
				KPD_army_experience_loss_factor = -0.25
			}
			custom_effect_tooltip = KPD_prussian_army_tt
			add_stability = -0.05
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
		}
	}
	focus = {
		#군 내 계급 도입
		id = KPD_introduction_of_ranks_within_the_military
		icon = GFX_goal_generic_small_arms
		cost = 10
		prerequisite = {
			focus = KPD_germany_red_army
			focus = KPD_prussian_army
		}
		available = {
		}
		relative_position_id = KPD_establishing_an_army
		x = 0
		y = 2
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		complete_tooltip = {
			swap_ideas = {
				remove_idea = KPD_no_rank_army
				add_idea = KPD_no_rank_army_1
			}
		}
		completion_reward = {
			add_to_variable = {
				KPD_army_experience_loss_factor = -0.1
			}
			add_to_variable = {
				KPD_army_max_command_power_mult = 0.1
			}
			custom_effect_tooltip = KPD_introduction_of_ranks_within_the_military_tt
			if = {
				limit = {
					has_idea = KPD_no_rank_army
				}
				swap_ideas = {
					remove_idea = KPD_no_rank_army
					add_idea = KPD_no_rank_army_1
				}
			}
			custom_effect_tooltip = KPD_introduction_of_ranks_within_the_military_2_tt
			hidden_effect = {
				country_event = KPD_unit_leader_event.1
			}
		}
	}
	focus = {
		#민병대 해산
		id = KPD_disbanding_the_militia
		icon = GFX_goal_generic_military_deal
		cost = 5
		prerequisite = {
			focus = KPD_introduction_of_ranks_within_the_military
		}
		mutually_exclusive = {
			focus = KPD_peoples_defense_corps
		}
		available = {
		}
		relative_position_id = KPD_introduction_of_ranks_within_the_military
		x = 0
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			delete_unit_template_and_units = {
				division_template = "Peoples Militia"
				disband = yes				#will refund equipment and manpower
			}
		}
	}
	focus = {
		#인민방위대
		id = KPD_peoples_defense_corps
		icon = GFX_goal_generic_military_sphere
		cost = 10
		prerequisite = {
			focus = KPD_introduction_of_ranks_within_the_military
		}
		mutually_exclusive = {
			focus = KPD_disbanding_the_militia
		}
		available = {
		}
		relative_position_id = KPD_introduction_of_ranks_within_the_military
		x = -2
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			delete_unit_template_and_units = {
				division_template = "Peoples Militia"
				disband = yes				#will refund equipment and manpower
			}
			add_ideas = KPD_peoples_defense_corps_idea
		}
	}
	focus = {
		#소련 영토 적응
		id = KPD_joint_military_training
		icon = GFX_focus_prc_infiltration
		cost = 10
		prerequisite = {
			focus = KPD_disbanding_the_militia
			focus = KPD_peoples_defense_corps
		}
		available = {
			SOV_will_support = yes
		}
		relative_position_id = KPD_disbanding_the_militia
		x = -2
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			add_to_variable = {
				KPD_army_winter_attrition_factor = -0.05
			}
			add_to_variable = {
				KPD_army_acclimatization_cold_climate_gain_factor = 0.1
			}
			add_to_variable = {
				KPD_army_acclimatization_hot_climate_gain_factor = 0.05
			}
			add_to_variable = {
				KPD_army_terrain_penalty_reduction = 0.05
			}
			custom_effect_tooltip = KPD_joint_military_training_tt
		}
	}
	focus = {
		#전위대 해산
		id = KPD_vanguard_disbanded
		icon = GFX_goal_generic_war_with_comintern
		cost = 5
		prerequisite = {
			focus = KPD_establishing_an_army
		}
		available = {
		}
		relative_position_id = KPD_establishing_an_army
		x = 3
		y = 2
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			add_to_variable = {
				KPD_army_conscription_factor = 0.03
			}
			add_to_variable = {
				KPD_army_training_time_factor = -0.05
			}
			custom_effect_tooltip = KPD_vanguard_disbanded_tt
			delete_unit_template_and_units = {
				division_template = "Vanguard"
				disband = yes				#will refund equipment and manpower
			}
		}
	}
	focus = {
		#장교 승진
		id = KPD_officer_promotion
		icon = GFX_focus_generic_support_the_left_right
		cost = 5
		prerequisite = {
			focus = KPD_vanguard_disbanded
		}
		prerequisite = {
			focus = KPD_introduction_of_ranks_within_the_military
		}
		available = {
		}
		relative_position_id = KPD_vanguard_disbanded
		x = 0
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			KPD_willi_stoph = {
				promote_leader = yes
			}
			random_army_leader = {
				limit = {
					is_field_marshal = no
					NOT = {
						is_character = KPD_elected_officer
						is_character = KPD_elected_officer_1
						is_character = KPD_elected_officer_2
						is_character = KPD_elected_officer_3
						is_character = KPD_elected_officer_4
						is_character = KPD_elected_officer_5
					}
					if = {
						limit = { ROOT = { has_character = KPD_wilhelm_leuschner } }
						is_character = KPD_wilhelm_leuschner
					}
				}
				gain_xp = 25
				add_unit_leader_trait = career_officer
	    		add_attack = 1
			}
			random_army_leader = {
				limit = {
					is_field_marshal = no
					NOT = {
						is_character = KPD_elected_officer
						is_character = KPD_elected_officer_1
						is_character = KPD_elected_officer_2
						is_character = KPD_elected_officer_3
						is_character = KPD_elected_officer_4
						is_character = KPD_elected_officer_5
					}
					if = {
						limit = { ROOT = { has_character = KPD_alexander_schwab } }
						is_character = KPD_alexander_schwab
					}
				}
				gain_xp = 25
				add_unit_leader_trait = career_officer
	    		add_attack = 1
			}
		}
	}
	focus = {
		#재교육 캠프
		id = KPD_reeducation_camp
		icon = GFX_goal_generic_dangerous_deal
		cost = 5
		prerequisite = {
			focus = KPD_vanguard_disbanded
		}
		available = {
		}
		relative_position_id = KPD_vanguard_disbanded
		x = 2
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			custom_effect_tooltip = TCA_pursuit_of_harmony_tt
			set_country_flag = kivotos_research_on
		}
	}
	focus = {
		#군 부패 금지
		id = KPD_no_military_corruption
		icon = GFX_goal_generic_secret_weapon
		cost = 5
		prerequisite = {
			focus = KPD_officer_promotion
		}
		mutually_exclusive = {
			focus = KPD_discipline_comes_first
		}
		available = {
		}
		relative_position_id = KPD_officer_promotion
		x = 2
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			add_to_variable = {
				KPD_army_conscription_factor = 0.03
			}
			add_to_variable = {
				KPD_army_army_org_regain = 0.1
			}
			add_to_variable = {
				KPD_army_experience_loss_factor = -0.1
			}
			custom_effect_tooltip = KPD_no_military_corruption_tt
			add_stability = 0.05
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
		}
	}
	focus = {
		#규율 우선
		id = KPD_discipline_comes_first
		icon = GFX_focus_secret_rearmament
		cost = 5
		prerequisite = {
			focus = KPD_officer_promotion
		}
		mutually_exclusive = {
			focus = KPD_no_military_corruption
		}
		available = {
		}
		relative_position_id = KPD_officer_promotion
		x = 0
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			add_to_variable = {
				KPD_army_army_org_factor = 0.05
			}
			add_to_variable = {
				KPD_army_experience_loss_factor = -0.25
			}
			custom_effect_tooltip = KPD_discipline_comes_first_tt
		}
	}
	focus = {
		#국가인민군
		id = KPD_national_peoples_army
		icon = GFX_focus_generic_military_mission
		cost = 10
		prerequisite = {
			focus = KPD_disbanding_the_militia
		}
		prerequisite = {
			focus = KPD_officer_promotion
		}
		available = {
		}
		relative_position_id = KPD_officer_promotion
		x = -3
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		select_effect = {
			add_ideas = SOV_military_reorganization_ns
		}
		completion_reward = {
			#Tooltip purposes (Select Effect)
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				add_ideas = SOV_military_reorganization_ns
			}
			#(Complete Effect)
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			hidden_effect = {
				remove_ideas = SOV_military_reorganization_ns
			}
			army_experience = 50
			add_command_power = 25
			unlock_decision_tooltip = KPD_officer_retraining
		}
	}
	focus = {
		#정치장교 조직 해체
		id = KPD_political_officers_disbanded
		icon = GFX_goal_generic_occupy_states_ongoing_war
		cost = 10
		prerequisite = {
			focus = KPD_national_peoples_army
		}
		mutually_exclusive = {
			focus = KPD_expansion_of_political_officers
		}
		available = {
		}
		relative_position_id = KPD_national_peoples_army
		x = 0
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		complete_tooltip = {
			remove_ideas = KPD_no_rank_army_1
		}
		completion_reward = {
			effect_tooltip = {
				remove_ideas = KPD_no_rank_army_1
			}
			hidden_effect = {
				if = {
					limit = {
						has_idea = KPD_no_rank_army_1
					}
					remove_ideas = KPD_no_rank_army_1
				}
			}
		}
	}
	focus = {
		#군 정치장교 장려
		id = KPD_expansion_of_political_officers
		icon = GFX_goal_generic_major_war
		cost = 10
		prerequisite = {
			focus = KPD_officer_promotion
		}
		mutually_exclusive = {
			focus = KPD_political_officers_disbanded
		}
		available = {
		}
		relative_position_id = KPD_national_peoples_army
		x = 2
		y = 1
		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}
		completion_reward = {
			effect_tooltip = {
				swap_ideas = {
					remove_idea = KPD_no_rank_army_1
					add_idea = SOV_politicized_military
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_idea = KPD_no_rank_army_1
					}
					swap_ideas = {
						remove_idea = KPD_no_rank_army_1
						add_idea = SOV_politicized_military
					}
				}
			}
		}
	}
	focus = { #연합최고사령부 해산
		id = KPD_dissolution_of_joint_supreme_command
		icon = GFX_goal_anschluss
		cost = 5
		x = 25
		y = 0
		available = {
			NOT = { has_war_with = TRM }
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			add_political_power = 120
			hidden_effect = {
				country_event = {
					id = KPD_event.13
					days = 10
				}
			}
			set_cosmetic_tag = TRM_collapse_win
		}
	}
}
