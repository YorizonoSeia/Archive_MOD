
shared_focus = {
	id = GEAF_develop_modern_maneuver_warfare
		text = GER_develop_modern_maneuver_warfare
	icon = GFX_focus_GER_army
	#prerequisite = { focus = }

	x = 8
	y = 0
	#relative_position_id = GEAF_prioritize_economic_growth
	cost = 5
	available = {
		OR = {
			original_tag = GEA
			has_country_flag = GEAF_develop_modern_maneuver_warfare_flag
		}
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_ARMY_XP FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		#ARMY
		#REMINDER to always update the fake NS if these numbers are altered!
		set_variable = { GER_military_army_armor_attack_factor = 0 }
		set_variable = { GER_military_army_armor_speed_factor = 0 }
		set_variable = { GER_military_org_loss_when_moving = 0 }
		set_variable = { GER_military_motorized_attack_factor = 0 }
		set_variable = { GER_military_mechanized_attack_factor = 0 }
		set_variable = { GER_military_army_infantry_attack_factor = 0 }
		set_variable = { GER_military_army_artillery_attack_factor = 0 }
		set_variable = { GER_military_army_org_factor = 0.05 }
		set_variable = { GER_military_planning_speed = 0.25 }
		set_variable = { GER_military_supply_factor = -0.15 }
		set_variable = { GER_military_equipment_capture = 0 }
		set_variable = { GER_military_initiative_factor = 0 }
		set_variable = { GER_military_army_fuel_consumption_factor = 0 }
		set_variable = { GER_military_coordination_bonus = 0 }
		set_variable = { GER_military_air_superiority_bonus_in_combat = 0 }
		set_variable = { GER_military_max_dig_in_factor = 0 }
		set_variable = { GER_military_army_artillery_defence_factor = 0 }
		set_variable = { GER_military_special_forces_cap = 0 }
		set_variable = { GER_military_acclimatization_hot_climate_gain_factor = 0 }
		set_variable = { GER_military_acclimatization_cold_climate_gain_factor = 0 }
		set_variable = { GER_military_land_doctrine_cost_factor = 0 }
		set_variable = { GER_military_modifier_army_sub_unit_militia_attack_factor = 0 }
		set_variable = { GER_military_modifier_army_sub_unit_militia_defence_factor = 0 }
		set_variable = { GER_military_modifier_army_sub_unit_militia_max_org_factor = 0 }
		set_variable = { GER_military_experience_gain_army_factor = 0 }
		set_variable = { GER_military_army_morale_factor = 0 }
		set_variable = { GER_military_mobilization_speed = 0 }
		set_variable = { GER_military_minimum_training_level = 0 }
		set_variable = { GER_military_unit_leader_as_advisor_cp_cost_factor = 0 }
		set_variable = { GER_military_command_power_gain_mult = 0 }
		add_dynamic_modifier = { modifier = GER_army_modifier }
		add_command_power = 25
		army_experience = 25

		custom_effect_tooltip = generic_skip_one_line_tt

		#add_doctrine_cost_reduction = {
		#	name = GER_develop_modern_maneuver_warfare
		#	cost_reduction = 0.25
		#	uses = 1
		#	category = land_doctrine
		#}
		#custom_effect_tooltip = available_chief_of_army
		#show_ideas_tooltip = walther_von_brauchitsch

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny"}
			}
			if = {
				limit = {
					has_idea = henschel
				}
				swap_ideas = {
					remove_idea = henschel
					add_idea = GER_henschel_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = henschel
						add_idea = GER_henschel_improved
					}
				}
			}
		}
		else = {
			mio:GEK_henschel_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_fortify_the_vaterland
		text = GER_fortify_the_vaterland
	icon = GFX_goal_fortify_the_westwall
	prerequisite = { focus = GEAF_develop_modern_maneuver_warfare }

	x = 0
	y = 1
	relative_position_id = GEAF_develop_modern_maneuver_warfare
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		add_tech_bonus = {
			name = GER_fortify_the_vaterland
			bonus = 0.5
			uses = 2
			category = cat_fortification
		}
		custom_effect_tooltip = generic_skip_one_line_tt

		add_timed_idea = {
			idea = GER_fortify_the_vaterland_idea
			days = 730
		}
		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_fortify_the_vaterland_unlock_decision_tt
	}
}

shared_focus = {
	id = GEAF_the_prussian_legacy
		text = GER_the_prussian_legacy
	icon = GFX_focus_GER_prussian_legacy
	prerequisite = { focus = GEAF_develop_modern_maneuver_warfare }
	mutually_exclusive = { focus = GEAF_adopt_new_panzer_doctrine }
	x = -2
	y = 2
	relative_position_id = GEAF_develop_modern_maneuver_warfare
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_ARMY_XP }

	completion_reward = {
		add_command_power = 25
		army_experience = 15

		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_the_prussian_legacy
			cost_reduction = 0.5
			uses = 2
			category = cat_grand_battle_plan
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_unlock_operational_planning_bewegungskrieg_tt
		effect_tooltip = { #This is done for tooltip purposes
			add_dynamic_modifier = { modifier = GER_bewegungskrieg_modifier }
		}
	}
}

shared_focus = {
	id = GEAF_improve_motorized_troops
		text = GER_improve_motorized_troops
	icon = GFX_goal_generic_army_motorized
	prerequisite = { focus = GEAF_the_prussian_legacy }

	x = -3
	y = 1
	relative_position_id = GEAF_the_prussian_legacy
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_INDUSTRY }

	completion_reward = {

		if = {
			limit = {
				has_character = GEK_oswald_lutz
			}
			every_unit_leader = {
				limit = {
					is_character = GEK_oswald_lutz
				}
				add_skill_level = 1
				add_attack = 1
				add_planning = 1
				add_logistics = 1
			}
			if = {
				limit = {
					GEK_oswald_lutz = {
						NOT = {
							has_trait = trickster
						}
					}
				}
				add_trait = {
					character = GEK_oswald_lutz
					trait = trickster
				}
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes			
		add_to_variable = { 
			GER_military_org_loss_when_moving = -0.1
			tooltip = org_loss_when_moving_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny"}
			}
			if = {
				limit = {
					has_idea = GER_alkett
				}
				swap_ideas = {
					remove_idea = GER_alkett
					add_idea = GER_alkett_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_alkett
						add_idea = GER_alkett_improved
					}
				}
			}
		}
		else = {
			mio:GEK_alkett_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_lessons_of_the_great_war
		text = GER_lessons_of_the_great_war
	icon = GFX_focus_generic_little_entente
	prerequisite = { focus = GEAF_the_prussian_legacy }

	x = -1
	y = 1
	relative_position_id = GEAF_the_prussian_legacy
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		army_experience = 15
		
		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_lessons_of_the_great_war
			cost_reduction = 0.25
			uses = 2
			category = land_doctrine
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		show_unit_leaders_tooltip = GEK_friedrich_schulz
		show_unit_leaders_tooltip = GEK_ernsteberhard_hell

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_max_dig_in_factor = 0.1
			tooltip = max_dig_in_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_modify_bewegungskrieg_modifier_tt
		effect_tooltip = {
			add_to_variable = { 
				GER_bewegungskrieg_army_infantry_attack_factor = 0.05
				tooltip = army_infantry_attack_factor_tt
			}
		}
	}
}			

shared_focus = {
	id = GEAF_artillery_bombardment
		text = GER_artillery_bombardment
	icon = GFX_focus_SWE_let_fly_all_guns
	prerequisite = { focus = GEAF_lessons_of_the_great_war }
	prerequisite = { focus = GEAF_improve_motorized_troops }

	x = 1
	y = 1
	relative_position_id = GEAF_improve_motorized_troops
	cost = 10
	available = {
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

	completion_reward = {
		
		IF = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			mio:GEK_rheinmetall_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05
			}
			mio:GEK_mauser_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.1
			}
			custom_effect_tooltip = generic_skip_one_line_tt
		}

		add_tech_bonus = {
			name = GER_artillery_bombardment
			bonus = 0.5
			uses = 2
			category = artillery
		}
		add_tech_bonus = {
			name = GER_artillery_bombardment
			bonus = 0.5
			uses = 1
			category = infantry_weapons
		}

		add_breakthrough_progress = {
			specialization = specialization_land
			value = 0.5
		}

		if = {
			limit = {
				has_dlc = "No Step Back"
			}
			custom_effect_tooltip = generic_skip_one_line_tt

			create_equipment_variant = {
				name = "Sturmpanzer"
				design_team = mio:GEK_alkett_organization #We feed on your tears
				parent_version = 0
				type = medium_tank_artillery_chassis_1
				modules = {
					main_armament_slot = tank_medium_howitzer
					turret_type_slot = tank_medium_fixed_superstructure_turret
					suspension_type_slot = tank_bogie_suspension
					armor_type_slot = tank_welded_armor
					engine_type_slot = tank_gasoline_engine
				}
				upgrades = {
					tank_nsb_engine_upgrade = 6
					tank_nsb_armor_upgrade = 2
				}
				icon = "GFX_GER_basic_medium_art_medium"
			}

			create_equipment_variant = {
				name = "Nashorn"
				design_team = mio:GEK_alkett_organization #We feed on your tears
				parent_version = 0
				type = medium_tank_destroyer_chassis_1
				modules = {
					main_armament_slot = tank_medium_cannon
					turret_type_slot = tank_medium_fixed_superstructure_turret
					suspension_type_slot = tank_bogie_suspension
					armor_type_slot = tank_welded_armor
					engine_type_slot = tank_gasoline_engine
				}
				upgrades = {
					tank_nsb_engine_upgrade = 6
					tank_nsb_armor_upgrade = 2
				}
				icon = "GFX_GER_basic_light_td"
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_army_artillery_defence_factor = 0.1
			tooltip = army_artillery_defence_factor_tt
		}
		
		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				OR = {
					has_dlc = "Gotterdammerung"
					has_dlc = "No Step Back"
				}
			}
			GER_add_or_modify_wunderwaffen = yes
			add_to_variable = { 
				GER_wunderwaffen_sp_tag_artillery_speed_factor = GER_wunderwaffe_research_speed_bonus
				tooltip = sp_tag_artillery_speed_factor_tt
			}
			custom_effect_tooltip = generic_skip_one_line_tt
		}

		custom_effect_tooltip = GER_modify_bewegungskrieg_modifier_tt
		effect_tooltip = {
			add_to_variable = { 
				GER_bewegungskrieg_army_artillery_attack_factor = 0.1
				tooltip = army_artillery_attack_factor_tt
			}
		}
	}
}

shared_focus = {
	id = GEAF_stormtroopers
		text = GER_stormtroopers
	icon = GFX_focus_CHL_departemento_de_las_tropas_nacistas_de_asalto
	prerequisite = { focus = GEAF_artillery_bombardment }

	x = 0
	y = 1
	relative_position_id = GEAF_artillery_bombardment
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		army_experience = 15
		
		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_stormtroopers
			cost_reduction = 0.25
			uses = 1
			category = land_doctrine
		}
		add_tech_bonus = {
			name = GER_stormtroopers
			bonus = 0.5
			uses = 1
			category = infantry_weapons
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_modify_bewegungskrieg_modifier_tt
		effect_tooltip = {
			add_to_variable = { 
				GER_bewegungskrieg_army_infantry_attack_factor = 0.05
				tooltip = army_infantry_attack_factor_tt
			}
			add_to_variable = { 
				GER_bewegungskrieg_breakthrough_factor = 0.05
				tooltip = breakthrough_factor_tt
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_sturmtruppe_battalion_tt
		hidden_effect = {
			set_technology = { sturmtruppe_battalion_tech = 1 popup = no }
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_character = GEK_friedrich_schulz				
			}
			if = {
				limit = {
					GEK_friedrich_schulz = {
						NOT = { 
							has_trait = brilliant_strategist
						}
					}
				}
				GEK_friedrich_schulz = {
					add_trait = { trait = brilliant_strategist }
				}
			}
		}
		if = {
			limit = {
				has_character = GEK_ernsteberhard_hell				
			}
			if = {
				limit = {
					GEK_ernsteberhard_hell = {
						NOT = { 
							has_trait = brilliant_strategist
						}
					}
				}
				GEK_ernsteberhard_hell = {
					add_trait = { trait = brilliant_strategist }
				}
			}
		}
	}
}

shared_focus = {
	id = GEAF_all_terrain_military_motorcycle
		text = GER_all_terrain_military_motorcycle
	icon = GFX_focus_generic_motor_cycle
	prerequisite = { focus = GEAF_the_prussian_legacy focus = GEAF_adopt_new_panzer_doctrine }

	x = 1
	y = 1
	relative_position_id = GEAF_the_prussian_legacy
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		add_tech_bonus = {
			name = GER_all_terrain_military_motorcycle
			uses = 1
			bonus = 0.5
			category = military_police_tech
		}

		if = {
			limit = {
				has_dlc = "Gotterdammerung"
			}
			if = {
				limit = {
					NOT = { has_tech = sp_armored_motorized_military_police_tech }
				}
				add_tech_bonus = {
					name = GER_all_terrain_military_motorcycle
					uses = 1
					bonus = 1
					technology = sp_armored_motorized_military_police_tech
				}
			}
			add_equipment_bonus = {
				name = GER_all_terrain_military_motorcycle
				bonus = {
					motorbike_equipment_1 = {
						build_cost_ic = -0.25
					}
				}
			}
		}

		if = {
			limit = {
				controls_state = 54
				54 = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
			}
			54 = { #Franken
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		else = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

shared_focus = {
	id = GEAF_salvage_captured_equipment
		text = GER_salvage_captured_equipment
	icon = GFX_focus_generic_tank_assembly
	prerequisite = { focus = GEAF_the_prussian_legacy focus = GEAF_adopt_new_panzer_doctrine }

	x = 3
	y = 1
	relative_position_id = GEAF_the_prussian_legacy
	cost = 5
	available = {
		has_war_with_major = yes
	}
	continue_if_invalid = yes

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		random_owned_state = {
			limit = {
				is_controlled_by = ROOT
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		#custom_effect_tooltip = available_military_high_command
		#show_ideas_tooltip = GER_alfred_becker

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_equipment_capture = 0.05
			tooltip = equipment_capture_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_industrial_modifier = yes
		add_to_variable = { 
			GER_industrial_equipment_conversion_speed = 0.1
			tooltip = equipment_conversion_speed_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		every_army_leader = {
			limit = {
				NOT = { has_trait = scavenger }
			}
			random_select_amount = 2
			add_trait = { trait = scavenger }
		}
	}
}

shared_focus = {
	id = GEAF_instill_auftragstaktik
		text = GER_instill_auftragstaktik
	icon = GFX_goal_generic_axis_build_infantry
	prerequisite = { focus = GEAF_the_prussian_legacy focus = GEAF_adopt_new_panzer_doctrine }

	x = 2
	y = 2
	relative_position_id = GEAF_the_prussian_legacy
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		army_experience = 25
		add_doctrine_cost_reduction = {
			name = GER_instill_auftragstaktik
			cost_reduction = 0.25
			uses = 1
			category = land_doctrine
		}
		
		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_initiative_factor = 0.1
			tooltip = initiative_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt
		#custom_effect_tooltip = available_chief_of_army
		#show_ideas_tooltip = franz_halder

		if = {
			limit = {
				has_character = GEK_gerd_von_rundstedt
				GEK_gerd_von_rundstedt = {
					is_field_marshal = no
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			GEK_gerd_von_rundstedt = {
				promote_leader = yes
			}
		}

		if = {
			limit = {
				has_character = GEK_gunther_von_kluge
				GEK_gunther_von_kluge = {
					is_field_marshal = no
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			GEK_gunther_von_kluge = {
				promote_leader = yes
			}
		}
	}
}

shared_focus = {
	id = GEAF_establish_the_afrikakorps
		text = GER_establish_the_afrikakorps
	icon = GFX_focus_GER_afrikakorps
	prerequisite = { focus = GEAF_instill_auftragstaktik }

	x = -2
	y = 1
	relative_position_id = GEAF_instill_auftragstaktik
	cost = 5
	available = {
		OR = {
			AND = {
				any_controlled_state = {
					is_fully_controlled_by = ROOT
					OR =  {
						is_on_continent = africa
						is_on_continent = asia
					}
				}
			}
			AND = {
				any_subject_country = {
					any_controlled_state = {
						is_fully_controlled_by = PREV
						OR =  {
							is_on_continent = africa
							is_on_continent = asia
						}
					}
				}
			}
			AND = {
				any_allied_country = {
					any_controlled_state = {
						is_fully_controlled_by = PREV
						OR =  {
							is_on_continent = africa
							is_on_continent = asia
						}
					}
				}
			}
		}
	}

	search_filters = { FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		if = {
			limit = {
				NOT = { has_completed_focus = GEAF_the_prussian_legacy}
				has_character = GEK_erwin_rommel
				GEK_erwin_rommel = {
					NOT = { has_trait = desert_fox }
				}
			}
			GEK_erwin_rommel = {
				add_trait = { trait = desert_fox }
			}
		}
		if = {
			limit = {
				NOT = { has_completed_focus = GEAF_the_prussian_legacy}
				has_character = GEK_walther_nehring
				GEK_walther_nehring = {
					NOT = { has_trait = desert_fox }
				}
			}
			GEK_walther_nehring = {
				add_trait = { trait = desert_fox }
			}
		}

		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_acclimatization_hot_climate_gain_factor = 0.1
			tooltip = acclimatization_hot_climate_gain_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_unlock_operational_planning_in_africa_tt
	}
}

shared_focus = {
	id = GEAF_establish_the_skijager
		text = GER_establish_the_skijager
	icon = GFX_focus_GER_gebirgsjager
	prerequisite = { focus = GEAF_instill_auftragstaktik }

	x = 2
	y = 1
	relative_position_id = GEAF_instill_auftragstaktik
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }

	completion_reward = {
		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_special_forces_cap = 0.05
			tooltip = special_forces_cap_tt
		}
		add_to_variable = { 
			GER_military_acclimatization_cold_climate_gain_factor = 0.1
			tooltip = acclimatization_cold_climate_gain_factor_tt
		}

		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			add_doctrine_cost_reduction = {
				name = GER_establish_the_skijager
				cost_reduction = 0.25
				uses = 2
				category = cat_mountaineers_doctrine
			}
		}
		add_tech_bonus = {
			name = GER_establish_the_skijager
			bonus = 0.5
			uses = 1
			category = mountaineers_tech
		}
	}
}

shared_focus = {
	id = GEAF_panzergrenadier
		text = GER_panzergrenadier
	icon = GFX_focus_generic_mechanized
	prerequisite = { focus = GEAF_instill_auftragstaktik }

	x = 0
	y = 1
	relative_position_id = GEAF_instill_auftragstaktik
	cost = 10
	available = {
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL }

	completion_reward = {

		add_tech_bonus = {
			name = GER_panzergrenadier
			ahead_reduction = 1
			bonus = 1
			uses = 1
			category = cat_mechanized_equipment
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_completed_focus = GEAF_the_prussian_legacy }
				NOT = { has_completed_focus = GEAF_adopt_new_panzer_doctrine }
			}
			custom_effect_tooltip = GER_modify_bewegungskrieg_or_blitzkrieg_tt
			effect_tooltip = {
				add_to_variable = { 
					GER_motor_and_mech_attack_motorized_attack_factor = 0.05
					tooltip = motorized_attack_factor_tt
				}
				add_to_variable = { 
					GER_motor_and_mech_attack_mechanized_attack_factor = 0.05
					tooltip = mechanized_attack_factor_tt
				}
			}
		}
		if = {
			limit = {
				has_completed_focus = GEAF_adopt_new_panzer_doctrine
			}
			custom_effect_tooltip = GER_modify_blitzkrieg_modifier_tt
			effect_tooltip = {
				add_to_variable = { 
					GER_motor_and_mech_attack_motorized_attack_factor = 0.1
					tooltip = motorized_attack_factor_tt
				}
				add_to_variable = {
					GER_motor_and_mech_attack_mechanized_attack_factor = 0.1
					tooltip = mechanized_attack_factor_tt
				}
			}
		}
		else_if = {
			limit = {
				has_completed_focus = GEAF_the_prussian_legacy
			}
			custom_effect_tooltip = GER_modify_bewegungskrieg_modifier_tt
			effect_tooltip = {
				add_to_variable = { 
					GER_motor_and_mech_attack_motorized_attack_factor = 0.1
					tooltip = motorized_attack_factor_tt
				}
				add_to_variable = {
					GER_motor_and_mech_attack_mechanized_attack_factor = 0.1
					tooltip = mechanized_attack_factor_tt
				}
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = GER_auto_union
				}
				swap_ideas = {
					remove_idea = GER_auto_union
					add_idea = GER_auto_union_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_auto_union
						add_idea = GER_auto_union_improved
					}
				}
			}
		}
		else = {
			mio:GEK_auto_union_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				unlock_mio_trait_tooltip = GER_mio_trait_schwerer_panzerspahwagen
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_nationalize_ford_factories
		text = GER_nationalize_ford_factories
	icon = GFX_focus_generic_truck
	prerequisite = { focus = GEAF_panzergrenadier }

	x = -3
	y = 1
	relative_position_id = GEAF_panzergrenadier
	cost = 5
	available = {
		has_war = yes
		51 = {
			is_fully_controlled_by = ROOT
		}

	}
	continue_if_invalid = yes

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }

	completion_reward = {
		51 = { #Rhineland
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_nationalize_ford_factories
			bonus = 0.5
			uses = 1
			category = cat_mechanized_equipment
		}
		if = {
			limit = {
				has_dlc = "La Resistance"
			}
			add_tech_bonus = {
				name = GER_nationalize_ford_factories
				bonus = 1
				uses = 1
				category = cat_armored_cars
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			set_technology = {
				GER_heavy_armored_car = 1
				popup = yes
			}
			custom_effect_tooltip = GER_heavy_armored_car_recon_company_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = opel
				}
				swap_ideas = {
					remove_idea = opel
					add_idea = GER_opel_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = opel
						add_idea = GER_opel_improved
					}
				}
			}
			if = {
				limit = {
					has_idea = GER_daimler_benz
				}
				swap_ideas = {
					remove_idea = GER_daimler_benz
					add_idea = GER_daimler_benz_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_daimler_benz
						add_idea = GER_daimler_benz_improved
					}
				}
			}
		}
		else = {
			mio:GEK_opel_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				unlock_mio_trait_tooltip = GER_mio_trait_continental_ag_tires
				unlock_mio_trait_tooltip = GER_mio_trait_ford_facilities
			}
			mio:GEK_daimler_benz_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_kriegslokomotiven
		text = GER_kriegslokomotiven
	icon = GFX_focus_GER_kriegslokomotive
	prerequisite = { focus = GEAF_panzergrenadier }

	x = 3
	y = 1
	relative_position_id = GEAF_panzergrenadier
	cost = 5
	available = {
		has_war = yes
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }

	completion_reward = {
		if = {
			limit = {
				controls_state = 64
			}
			64 = { #Brandenburg
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		else = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		
		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_kriegslokomotiven
			bonus = 0.5
			uses = 1
			category = train_tech
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_equipment_to_stockpile = {
			type = train_equipment
			amount = 15
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_idea = GER_deutsche_reichsbahn
			}
			swap_ideas = {
				remove_idea = GER_deutsche_reichsbahn
				add_idea = GER_deutsche_reichsbahn_improved
			}
		}
		else = {
			effect_tooltip = {
				swap_ideas = {
					remove_idea = GER_deutsche_reichsbahn
					add_idea = GER_deutsche_reichsbahn_improved
				}
			}
		}
	}
}

shared_focus = {
	id = GEAF_improve_the_logistics_system
		text = GER_improve_the_logistics_system
	icon = GFX_focus_generic_reinforcing_the_supply_network
	mutually_exclusive = { focus = GEAF_defend_the_vaterland }
	prerequisite = { focus = GEAF_panzergrenadier }

	x = -1
	y = 1
	relative_position_id = GEAF_panzergrenadier
	cost = 5
	available = {
		has_war = yes
	}
	continue_if_invalid = yes

	search_filters = {}

	completion_reward = {
		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_supply_factor = 0.15
			tooltip = supply_factor_tt
		}
		add_to_variable = { 
			GER_military_army_fuel_consumption_factor = -0.1
			tooltip = army_fuel_consumption_factor_tt
		}
	}
}

shared_focus = {
	id = GEAF_defend_the_vaterland
		text = GER_defend_the_vaterland
	icon = GFX_goal_generic_defence
	mutually_exclusive = { focus = GEAF_improve_the_logistics_system }
	prerequisite = { focus = GEAF_panzergrenadier }

	x = 1
	y = 1
	relative_position_id = GEAF_panzergrenadier
	cost = 5
	available = {
		has_war = yes
	}

	search_filters = { FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		add_timed_idea = {
			idea = GER_defend_the_vaterland_ns
			days = 545
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_character = GEK_gerd_von_rundstedt
				GEK_gerd_von_rundstedt = {
					is_field_marshal = yes
				}
			}
			if = {
				limit = {
					GEK_gerd_von_rundstedt = {
						NOT = { 
							has_trait = defensive_doctrine
						}
					}
				}
				GEK_gerd_von_rundstedt = {
					add_trait = { trait = defensive_doctrine }
				}
			}
		}

		if = {
			limit = {
				has_character = GEK_gunther_von_kluge
				GEK_gunther_von_kluge = {
					is_field_marshal = yes
				}
			}
			if = {
				limit = {
					GEK_gunther_von_kluge = {
						NOT = { 
							has_trait = defensive_doctrine
						}
					}
				}
				GEK_gunther_von_kluge = {
					add_trait = { trait = defensive_doctrine }
				}
			}
		}

		if = {
			limit = {
				has_character = GEK_albert_kesselring				
			}
			if = {
				limit = {
					GEK_albert_kesselring = {
						is_field_marshal = yes
						NOT = { 
							has_trait = offensive_doctrine
						}
					}
				}
				if = {
					limit = {
						GEK_albert_kesselring = {
							NOT = { 
								has_trait = defensive_doctrine
							}
						}
					}
					GEK_albert_kesselring = {
						add_trait = { trait = defensive_doctrine }
					}
				}
				else_if = {
					limit = {
						GEK_albert_kesselring = {
							has_trait = defensive_doctrine
							NOT = { 
								has_trait = unyielding_defender
							}
						}
					}
					GEK_albert_kesselring = {
						add_trait = { trait = unyielding_defender }
					}
				}
			}
		}
		if = {
			limit = {
				has_character = GEK_gotthard_heinrici
			}
			if = {
				limit = {
					GEK_gotthard_heinrici = {
						NOT = { 
							has_trait = trait_cautious
						}
					}
				}
				GEK_gotthard_heinrici = {
					add_trait = { trait = trait_cautious }
				}
			}
			if = {
				limit = {
					GEK_gotthard_heinrici = {
						is_field_marshal = yes
						NOT = { 
							has_trait = offensive_doctrine
						}
					}
				}
				if = {
					limit = {
						GEK_gotthard_heinrici = {
							NOT = { 
								has_trait = defensive_doctrine
							}
						}
					}
					GEK_gotthard_heinrici = {
						add_trait = { trait = defensive_doctrine }
					}
				}
				else_if = {
					limit = {
						GEK_gotthard_heinrici = {
							has_trait = defensive_doctrine
							NOT = { 
								has_trait = unyielding_defender
							}
						}
					}
					GEK_gotthard_heinrici = {
						add_trait = { trait = unyielding_defender }
					}
				}
			}
		}
	}
}

shared_focus = {
	id = GEAF_uranverein
		text = GER_uranverein
	icon = GFX_focus_wonderweapons
	prerequisite = { focus = GEAF_improve_the_logistics_system focus = GEAF_defend_the_vaterland }
	x = 1
	y = 1
	relative_position_id = GEAF_improve_the_logistics_system
	cost = 5
	available = {
		has_war_with_major = yes
	}

	search_filters = { FOCUS_FILTER_RESEARCH }

	completion_reward = {
		if = {
			limit = {
				NOT = { has_tech = atomic_research }
			}
			add_tech_bonus = {
				name = GER_uranverein
				bonus = 1.0
				uses = 1
				category = nuclear
			}
		}
		else = {
			add_breakthrough_progress = {
				specialization = specialization_nuclear
				value = 0.5
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				OR = {
					NOT = { is_special_project_completed = sp:sp_nuclear_reactor }
					NOT = { is_special_project_completed = sp:sp_nuclear_bomb }
					AND = {
						has_dlc = "Gotterdammerung"
						NOT = { is_special_project_completed = sp:sp_nuclear_warheads }
					}
				}
			}
			GER_add_or_modify_wunderwaffen = yes
		}
		if = {
			limit = {
				NOT = { is_special_project_completed = sp:sp_nuclear_reactor }
			}
			add_to_variable = { 
				GER_wunderwaffen_sp_nuclear_reactor_speed_factor = GER_wunderwaffe_research_speed_bonus
				tooltip = sp_nuclear_reactor_speed_factor_tt
			}
		}

		if = {
			limit = {
				NOT = { is_special_project_completed = sp:sp_nuclear_bomb }
			}
			add_to_variable = { 
				GER_wunderwaffen_sp_nuclear_bomb_speed_factor = GER_wunderwaffe_research_speed_bonus
				tooltip = sp_nuclear_bomb_speed_factor_tt
			}
		}
		if = {
			limit = {
				has_dlc = "Gotterdammerung"
				NOT = { is_special_project_completed = sp:sp_nuclear_warheads }
			}
			add_to_variable = { 
				GER_wunderwaffen_sp_nuclear_warheads_speed_factor = GER_wunderwaffe_research_speed_bonus
				tooltip = sp_nuclear_warheads_speed_factor_tt
			}
		}
	}
}

shared_focus = {
	id = GEAF_adopt_new_panzer_doctrine
		text = GER_adopt_new_panzer_doctrine

	icon = GFX_focus_generic_tank_assault
	alternate_icon = GFX_focus_GER_adopt_new_panzer_doctrine_historical

	prerequisite = { focus = GEAF_develop_modern_maneuver_warfare }
	mutually_exclusive = { focus = GEAF_the_prussian_legacy }
	x = 2
	y = 2
	relative_position_id = GEAF_develop_modern_maneuver_warfare
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_ARMY_XP }

	completion_reward = {
		add_command_power = 25
		army_experience = 15

		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_adopt_new_panzer_doctrine
			cost_reduction = 0.5
			uses = 1
			category = cat_mobile_warfare
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		#show_unit_leaders_tooltip = GER_heinz_guderian
		#custom_effect_tooltip = available_theorist
		#show_ideas_tooltip = heinz_guderian
		#show_unit_leaders_tooltip = GEK_erwin_rommel
		#custom_effect_tooltip = available_military_high_command
		#show_ideas_tooltip = erwin_rommel

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_unlock_operational_planning_blitzkrieg_tt
		effect_tooltip = { #This is done for tooltip purposes
			add_dynamic_modifier = { modifier = GER_blitzkrieg_modifier }
		}
	}
}

shared_focus = {
	id = GEAF_panzer_troops_school
		text = GER_panzer_troops_school
	icon = GFX_goal_generic_army_tanks
	prerequisite = { focus = GEAF_adopt_new_panzer_doctrine }

	x = 1
	y = 1
	relative_position_id = GEAF_adopt_new_panzer_doctrine
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_ARMY_XP FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		army_experience = 15

		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_adopt_new_panzer_doctrine
			cost_reduction = 0.25
			uses = 2
			category = land_doctrine
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		show_unit_leaders_tooltip = GER_hasso_von_manteuffel
		show_unit_leaders_tooltip = GEK_walther_nehring

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes			
		add_to_variable = { 
			GER_military_org_loss_when_moving = -0.1
			tooltip = org_loss_when_moving_tt
		}
	}
}

shared_focus = {
	id = GEAF_advanced_panzer_research
		text = GER_advanced_panzer_research
	icon = GFX_focus_generic_army_tanks2
	prerequisite = { focus = GEAF_adopt_new_panzer_doctrine }

	x = 3
	y = 1
	relative_position_id = GEAF_adopt_new_panzer_doctrine
	cost = 10
	available = {
		has_tech = radio
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		add_tech_bonus = {
			name = GER_advanced_panzer_research
			#ahead_reduction = 1
			bonus = 1
			uses = 1
			category = cat_medium_armor
		}


		if = {
			limit = { 
				has_dlc = "No Step Back"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Panzer III Ausf. A"
				type = medium_tank_chassis_1
				design_team = mio:GEK_daimler_benz_organization #We feed on your tears
				parent_version = 0
				modules = {
					main_armament_slot = tank_high_velocity_cannon
					turret_type_slot = tank_medium_three_man_tank_turret
					suspension_type_slot = tank_bogie_suspension
					armor_type_slot = tank_welded_armor
					engine_type_slot = tank_gasoline_engine
					special_type_slot_1 = tank_radio_1
					special_type_slot_2 = smoke_launchers
				}
				upgrades = {
					tank_nsb_engine_upgrade = 6
					tank_nsb_armor_upgrade = 3
				}
				icon = "GFX_GER_basic_medium_tank_medium"
			}
			create_equipment_variant = {
				name = "Panzer IV"
				type = medium_tank_chassis_1
				design_team = mio:GEK_daimler_benz_organization #We feed on your tears
				parent_version = 0
				modules = {
					main_armament_slot = tank_close_support_gun
					turret_type_slot = tank_medium_three_man_tank_turret
					suspension_type_slot = tank_bogie_suspension
					armor_type_slot = tank_welded_armor
					engine_type_slot = tank_gasoline_engine
					special_type_slot_1 = tank_radio_1
					special_type_slot_2 = smoke_launchers
				}
				upgrades = {
					tank_nsb_engine_upgrade = 6
					tank_nsb_armor_upgrade = 2
				}
				icon = "GFX_GER_basic_medium_tank_medium"
			}
			create_equipment_variant = {
				name = "Sturmgeschütz III"
				design_team = mio:GEK_alkett_organization #We feed on your tears
				parent_version = 0
				type = medium_tank_artillery_chassis_1
				modules = {
					main_armament_slot = tank_medium_howitzer
					turret_type_slot = tank_medium_fixed_superstructure_turret
					suspension_type_slot = tank_bogie_suspension
					armor_type_slot = tank_welded_armor
					engine_type_slot = tank_gasoline_engine
					special_type_slot_1 = tank_radio_1
				}
				upgrades = {
					tank_nsb_engine_upgrade = 4
					tank_nsb_armor_upgrade = 3
				}
				icon = "GFX_GER_basic_medium_td_medium"
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_coordination_bonus = 0.05
			tooltip = coordination_bonus_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_modify_blitzkrieg_modifier_tt
		effect_tooltip = {
			add_to_variable = { 
				GER_blitzkrieg_army_armor_speed_factor = 0.05
				tooltip = army_armor_speed_factor_tt
			}
			add_to_variable = { 
				GER_blitzkrieg_army_armor_attack_factor = 0.05
				tooltip = army_armor_attack_factor_tt
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny"}
			}
			if = {
				limit = {
					has_idea = GER_MAN
				}
				swap_ideas = {
					remove_idea = GER_MAN
					add_idea = GER_MAN_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_MAN
						add_idea = GER_MAN_improved
					}
				}
			}
		}
		else = {
			mio:GEK_MAN_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_expand_kummersdorfs_capacity
		text = GER_expand_kummersdorfs_capacity
	icon = GFX_focus_generic_heavy_tank
	prerequisite = { focus = GEAF_advanced_panzer_research }
	prerequisite = { focus = GEAF_panzer_troops_school }

	x = 1
	y = 1
	relative_position_id = GEAF_panzer_troops_school
	cost = 5
	available = {
		has_war_with_major = yes
	}

	continue_if_invalid = yes

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		add_tech_bonus = {
			name = GER_expand_kummersdorfs_capacity
			ahead_reduction = 1
			bonus = 1
			uses = 1
			category = cat_heavy_armor
		}
		add_tech_bonus = {
			name = GER_expand_kummersdorfs_capacity
			bonus = 1
			uses = 1
			category = cat_medium_armor
		}
		add_breakthrough_progress = {
			specialization = specialization_land
			value = 0.5
		}

		
		if = {
			limit = { 
				has_dlc = "No Step Back"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Panther Ausf. A"
				type = medium_tank_chassis_3
				design_team = mio:GEK_man_organization #We feed on your tears
				modules = {
					main_armament_slot = tank_high_velocity_cannon
					turret_type_slot = tank_medium_three_man_tank_turret
					suspension_type_slot = tank_interleaved_suspension
					armor_type_slot = tank_welded_armor
					engine_type_slot = tank_gasoline_engine
					special_type_slot_1 = tank_radio_1
					special_type_slot_2 = sloped_armor
					special_type_slot_3 = smoke_launchers
				}
				upgrades = {
					tank_nsb_engine_upgrade = 6
					tank_nsb_armor_upgrade = 4
				}
				icon = "GFX_GER_advanced_medium_tank_medium"
			}
			create_equipment_variant = {
				name = "Tiger I Ausf. A"
				type = heavy_tank_chassis_2
				design_team = mio:GEK_porsche_organization #We feed on your tears
				modules = {
					main_armament_slot = tank_heavy_cannon
					turret_type_slot = tank_heavy_three_man_tank_turret
					suspension_type_slot = tank_interleaved_suspension
					armor_type_slot = tank_welded_armor
					engine_type_slot = tank_gasoline_engine
					special_type_slot_1 = tank_radio_1
					special_type_slot_2 = smoke_launchers
					special_type_slot_3 = additional_machine_guns
				}
				upgrades = {
					tank_nsb_engine_upgrade = 8
					tank_nsb_armor_upgrade = 6
				}
				icon = "GFX_GER_advanced_heavy_tank_medium"
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_add_or_modify_wunderwaffen = yes
		add_to_variable = { 
			GER_wunderwaffen_sp_tag_tank_speed_factor = GER_wunderwaffe_research_speed_bonus
			tooltip = sp_tag_tank_speed_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_modify_blitzkrieg_modifier_tt
		effect_tooltip = {
			add_to_variable = { 
				GER_blitzkrieg_army_armor_attack_factor = 0.05
				tooltip = army_armor_attack_factor_tt
			}
			add_to_variable = { 
				GER_blitzkrieg_breakthrough_factor = 0.05
				tooltip = breakthrough_factor_tt
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny"}
			}
			if = {
				limit = {
					has_idea = porsche
				}
				swap_ideas = {
					remove_idea = porsche
					add_idea = GER_porsche_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = porsche
						add_idea = GER_porsche_improved
					}
				}
			}
		}
		else = {
			mio:GEK_porsche_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_combined_arms
		text = GER_combined_arms

	icon = GFX_focus_generic_tank_air_support
	alternate_icon = GFX_focus_GER_combined_arms_historical

	prerequisite = { focus = GEAF_advanced_panzer_research }
	prerequisite = { focus = GEAF_dive_bombers }

	x = 1
	y = 1
	relative_position_id = GEAF_advanced_panzer_research
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_air_superiority_bonus_in_combat = 0.1
			tooltip = air_superiority_bonus_in_combat_tt
		}
		add_to_variable = { 
			GER_military_coordination_bonus = 0.05
			tooltip = coordination_bonus_tt
		}
	}
}


#LUFTWAFFE
shared_focus = {
	id = GEAF_expanding_the_luftwaffe
		text = GER_expanding_the_luftwaffe
	icon = GFX_focus_GER_airforce
	#prerequisite = { focus = }

	x = 12
	y = 0
	relative_position_id = GEAF_develop_modern_maneuver_warfare
	cost = 5
	available = {
		OR = {
			original_tag = GEF
			has_country_flag = GEAF_expanding_the_luftwaffe_flag
		}
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_AIR_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MILITARY_CHARACTER }

	complete_tooltip = {
		
		air_experience = 25
		every_state = {
			limit = { has_state_flag = GER_expanding_the_luftwaffe_flag }
			add_building_construction = {
				type = air_base
				level = 2
				instant_build = yes
			}
		}
		every_state = {
			limit = { has_state_flag = GER_expanding_the_luftwaffe_flag }
			add_building_construction = {
				type = air_base
				level = 6
				instant_build = yes
			}
		}
	}
	
	completion_reward = {		
		#AIRFORCE
		#REMINDER to always update the fake NS if these numbers are altered!
		set_variable = { GER_military_air_accidents_factor = 0.10 }
		set_variable = { GER_military_air_manpower_requirement_factor = 0.10 }
		set_variable = { GER_military_air_agility_factor = 0 }
		set_variable = { GER_military_air_ace_generation_chance_factor = 0 }
		set_variable = { GER_military_air_nav_efficiency = 0 }
		set_variable = { GER_military_air_cas_efficiency = 0 }
		set_variable = { GER_military_air_strategic_bomber_bombing_factor = 0 }
		set_variable = { GER_military_air_range_factor = 0 }
		set_variable = { GER_military_air_fuel_consumption_factor = 0 }
		add_dynamic_modifier = { modifier = GER_airforce_modifier }	
		
		air_experience = 25

		if = {
			limit = {
				NOT = {
					any_owned_state = {
						air_base > 3
						air_base < 9
					}
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = air_base
						size > 5
					}
				}
				add_building_construction = {
					type = air_base
					level = 6
					instant_build = yes
				}
				set_state_flag = GER_expanding_the_luftwaffe_flag
			}				
		}

		random_owned_controlled_state = {
			limit = {
				air_base > 3
				air_base < 9
			}
			add_building_construction = {
				type = air_base
				level = 2
				instant_build = yes
			}
			set_state_flag = GER_expanding_the_luftwaffe_flag
		}
		random_owned_controlled_state = {
			limit = {
				air_base > 3
				air_base < 9
			}
			add_building_construction = {
				type = air_base
				level = 2
				instant_build = yes
			}
			set_state_flag = GER_expanding_the_luftwaffe_flag
		}
		random_owned_controlled_state = {
			limit = {
				air_base > 2
				air_base < 9
			}
			add_building_construction = {
				type = air_base
				level = 2
				instant_build = yes
			}
			set_state_flag = GER_expanding_the_luftwaffe_flag
		}
		
		
		
		
		IF = {
			limit = { has_dlc = "Gotterdammerung" }
			custom_effect_tooltip = generic_skip_one_line_tt
			custom_effect_tooltip = GER_unlocks_eben_emael_raid_tt

			custom_effect_tooltip = generic_skip_one_line_tt
		}

		#custom_effect_tooltip = available_chief_of_airforce
		#show_ideas_tooltip = ritter_von_greim
	}
}

shared_focus = {
	id = GEAF_aeronautical_research_institute
		text = GER_aeronautical_research_institute
	icon = GFX_focus_generic_air_research_boost
	prerequisite = { focus = GEAF_expanding_the_luftwaffe }

	x = -3
	y = 1
	relative_position_id = GEAF_expanding_the_luftwaffe
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		if = {
			limit = {
				controls_state = 59
			}
			59 = { #Hannover
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		else = {
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_aeronautical_research_institute
			bonus = 0.25
			uses = 2
			category = air_equipment
		}
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}
		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = GER_arado_flugzeugwerke
				}
				swap_ideas = {
					remove_idea = GER_arado_flugzeugwerke
					add_idea = GER_arado_flugzeugwerke_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_arado_flugzeugwerke
						add_idea = GER_arado_flugzeugwerke_improved
					}
				}
			}
		}
		else = {
			mio:GEK_arado_flugzeugwerke_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_dive_bombers
		text = GER_dive_bombers

	icon = GFX_focus_generic_cas_aircraft
	alternate_icon = GFX_focus_GER_sturzkampfbomber_historical

	prerequisite = { focus = GEAF_aeronautical_research_institute }
	mutually_exclusive = { focus = GEAF_tactical_bombers focus = GEAF_uralbomber_program }
	x = -2
	y = 1
	relative_position_id = GEAF_aeronautical_research_institute
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {

		add_doctrine_cost_reduction = {
			name = GER_dive_bombers
			cost_reduction = 0.25
			uses = 1
			category = battlefield_support_tree
		}
		add_tech_bonus = {
			name = GER_dive_bombers
			bonus = 0.5
			uses = 1
			category = light_air
		}

		if = {
			limit = {
				has_dlc = "By Blood Alone"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = { 
				name = "Ju 87 G" 
				type = small_plane_cas_airframe_2
				allow_without_tech = no
				design_team = mio:GEK_junkers_organization
				modules = {
					fixed_main_weapon_slot = bomb_locks
					fixed_auxiliary_weapon_slot_1 = tank_buster_1
					engine_type_slot = engine_3_1x
					special_type_slot_1 = lmg_defense_turret
					special_type_slot_2 = empty
				}
				icon = "GFX_GER_CAS2_medium"
				model = "GER_CAS_equipment_2_entity"
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_cas_efficiency = 0.1
			tooltip = air_cas_efficiency_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_ace = {
			name = Hans
			surname = Rudel
			callsign = Adler #made-up-ish; "Eagle of the Eastern Front" was his real nickname
			type = support_genius
		}
		add_ace = {
			name = Anton
			surname = Hubsch
			callsign = Toni
			type = support_unique
		}
		add_ace = {
			name = Gerhard
			surname = Studemann
			callsign = Stutz
			type = support_unique
		}
		add_ace = {
			name = Alois
			surname = Wosnitza
			callsign = Ritter #Made-up
			type = support_unique
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = junkers
				}
				swap_ideas = {
					remove_idea = junkers
					add_idea = GER_junkers_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = junkers
						add_idea = GER_junkers_improved
					}
				}
			}
		}
		else = {
			mio:GEK_junkers_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}

		#custom_effect_tooltip = generic_skip_one_line_tt
		#custom_effect_tooltip = available_military_high_command
		#show_ideas_tooltip = hugo_sperrle

		#custom_effect_tooltip = generic_skip_one_line_tt
		#custom_effect_tooltip = available_theorist
		#show_ideas_tooltip = ernst_udet
	}
}

shared_focus = {
	id = GEAF_tactical_bombers
		text = GER_tactical_bombers
	icon = GFX_goal_generic_air_bomber
	prerequisite = { focus = GEAF_aeronautical_research_institute }
	mutually_exclusive = { focus = GEAF_dive_bombers focus = GEAF_uralbomber_program }
	x = 0
	y = 1
	relative_position_id = GEAF_aeronautical_research_institute
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		#custom_effect_tooltip = available_military_high_command
		#show_ideas_tooltip = erhard_milch

		add_doctrine_cost_reduction = {
			name = GER_tactical_bombers
			cost_reduction = 0.25
			uses = 2
			category = operational_integrity_tree
		}
		add_tech_bonus = {
			name = GER_tactical_bombers
			bonus = 0.5
			uses = 1
			category = medium_air
		}

		if = {
			limit = {
				has_dlc = "By Blood Alone"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = { 
				name = "Ju 88" 
				type = medium_plane_airframe_2
				allow_without_tech = no
				design_team = mio:GEK_dornier_organization
				modules = {
					fixed_main_weapon_slot = medium_bomb_bay
					fixed_auxiliary_weapon_slot_1 = medium_bomb_bay
					fixed_auxiliary_weapon_slot_2 = torpedo_mounting
					engine_type_slot = engine_3_2x
					special_type_slot_1 = lmg_defense_turret_2x
					special_type_slot_2 = empty	
				}
				icon = "GFX_GER_tactical_bomber2_medium"
				model = "GER_medium_plane_entity"
			}
		}
		
		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_strategic_bomber_bombing_factor = 0.1
			tooltip = air_strategic_bomber_bombing_factor_tt
		}
		add_to_variable = { 
			GER_military_air_cas_efficiency = 0.05
			tooltip = air_cas_efficiency_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_ace = {
			name = Werner
			surname = Baumbach
			callsign = "Papa Bär" #made-up
			type = bomber_unique
		}
		add_ace = {
			name = Bernhard
			surname = Jope
			callsign = Senker #made-up
			type = bomber_unique
		}
		add_ace = {
			name = Anton
			surname = Hubsch
			callsign = Toni
			type = support_unique
		}
		add_ace = {
			name = Gerhard
			surname = Studemann
			callsign = Stutz
			type = support_unique
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = dornier
				}
				swap_ideas = {
					remove_idea = dornier
					add_idea = GER_dornier_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = dornier
						add_idea = GER_dornier_improved
					}
				}
			}
		}
		else = {
			mio:GEK_dornier_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_uralbomber_program
		text = GER_uralbomber_program
	icon = GFX_focus_generic_long_range_aircraft
	prerequisite = { focus = GEAF_aeronautical_research_institute }
	mutually_exclusive = { focus = GEAF_dive_bombers focus = GEAF_tactical_bombers }
	x = 2
	y = 1
	relative_position_id = GEAF_aeronautical_research_institute
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		#custom_effect_tooltip = available_military_high_command
		#show_ideas_tooltip = GER_robert_knauss

		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_uralbomber_program
			cost_reduction = 0.25
			uses = 2
			category = strategic_destruction_tree
		}
		add_tech_bonus = {
			name = GER_uralbomber_program
			bonus = 0.5
			uses = 1
			category = heavy_air
		}

		if = {
			limit = {
				has_dlc = "By Blood Alone"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = { 
				name = "Ju 89" 
				type = large_plane_airframe_1
				allow_without_tech = no
				design_team = mio:GEK_heinkel_organization
				modules = {
					fixed_main_weapon_slot = large_bomb_bay
					fixed_auxiliary_weapon_slot_1 = empty
					fixed_auxiliary_weapon_slot_2 = empty
					engine_type_slot = engine_2_4x
					special_type_slot_1 = lmg_defense_turret_2x
					special_type_slot_2 = lmg_defense_turret
				}
				icon = "GFX_GER_strategic_bomber1_medium"
				model = "GER_strat_bomber_equipment_1_entity"
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_range_factor = 0.15
			tooltip = air_range_factor_tt
		}
		add_to_variable = { 
			GER_military_air_strategic_bomber_bombing_factor = 0.05
			tooltip = air_strategic_bomber_bombing_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_ace = {
			name = Hansgeorg
			surname = Batcher
			callsign = Schützin #made-up
			type = bomber_genius
		}
		add_ace = {
			name = Werner
			surname = Baumbach
			callsign = "Papa Bär" #made-up
			type = bomber_unique
		}
		add_ace = {
			name = Bernhard
			surname = Jope
			callsign = Senker #made-up
			type = bomber_unique
		}
		add_ace = {
			name = Horst
			surname = Rudat
			callsign = Mistel #made-up
			type = bomber_unique
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = heinkel
				}
				swap_ideas = {
					remove_idea = heinkel
					add_idea = GER_heinkel_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = heinkel
						add_idea = GER_heinkel_improved
					}
				}
			}
		}
		else = {
			mio:GEK_heinkel_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_rocketry_innovations
		text = GER_rocketry_innovations
	icon = GFX_focus_rocketry
	prerequisite = { focus = GEAF_dive_bombers focus = GEAF_tactical_bombers focus = GEAF_uralbomber_program }

	x = 2
	y = 3
	relative_position_id = GEAF_dive_bombers
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		add_tech_bonus = {
			name = GER_aerodynamic_research_institute
			bonus = 0.5
			uses = 1
			category = rocketry
		}

		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.75
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_timed_idea = {
			idea = GER_rocketry_idea
			days = 730
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_add_or_modify_wunderwaffen = yes
		add_to_variable = { 
			GER_wunderwaffen_sp_tag_rocket_speed_factor = 0.15
			tooltip = sp_tag_rocket_speed_factor_tt
		}

		#custom_effect_tooltip = generic_skip_one_line_tt
		#custom_effect_tooltip = available_military_high_command
		#show_ideas_tooltip = GER_walter_dornberger
		
	}
}

shared_focus = {
	id = GEAF_fallschirmjager
		text = GER_fallschirmjager
	icon = GFX_focus_generic_paratrooper
	prerequisite = { focus = GEAF_expanding_the_luftwaffe }

	x = 0
	y = 1
	relative_position_id = GEAF_expanding_the_luftwaffe
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			if = {
				limit = {
					NOT = { has_completed_focus = GEAF_marinestosstrupp }
				}
				add_potential_special_forces_tree = yes
			}
			add_doctrine_cost_reduction = {
				name = GER_fallschirmjager
				cost_reduction = 0.25
				uses = 2
				category = cat_paratroopers_doctrine
			}
		}
		add_tech_bonus = {
			name = GER_fallschirmjager
			bonus = 1
			uses = 1
			category = para_tech
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_special_forces_cap = 0.05
			tooltip = special_forces_cap_tt
		}

		#custom_effect_tooltip = generic_skip_one_line_tt

		#show_unit_leaders_tooltip = GER_kurt_student
		#custom_effect_tooltip = available_military_high_command
		#show_ideas_tooltip = kurt_student
	}
}

shared_focus = {
	id = GEAF_form_the_jagdwaffe
		text = GER_form_the_jagdwaffe
	icon = GFX_focus_SOV_flying_clubs
	prerequisite = { focus = GEAF_expanding_the_luftwaffe }

	x = 3
	y = 1
	relative_position_id = GEAF_expanding_the_luftwaffe
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_HISTORICAL FOCUS_FILTER_AIR_XP FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		air_experience = 25
		add_doctrine_cost_reduction = {
			name = GER_form_the_jagdwaffe
			cost_reduction = 0.5
			uses = 1
			category = air_doctrine
		}


		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_ace_generation_chance_factor = 0.25
			tooltip = air_ace_generation_chance_factor_tt
		}
		add_to_variable = { 
			GER_military_air_agility_factor = 0.05
			tooltip = air_agility_factor_tt
		}


		if = {
			limit = {
				has_dlc = "By Blood Alone"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = { 
				name = "FW 190" 
				type = small_plane_airframe_2
				allow_without_tech = no
				design_team = mio:GEK_messerschmitt_organization
				modules = {
					fixed_main_weapon_slot = light_mg_4x
					fixed_auxiliary_weapon_slot_1 = aircraft_cannon_1_2x
					engine_type_slot = engine_3_1x
					special_type_slot_1 = armor_plate_small
					special_type_slot_2 = drop_tanks	
				}
				icon = "GFX_GER_fighter2_medium"
				model = "GER_fighter_equipment_2_entity"
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_ace = {
			name = Erich
			surname = Hartmann
			callsign = Bubi
			type = fighter_genius
		}

		add_ace = {
			name = Gerhard
			surname = Barkhorn
			callsign = Gerd
			type = fighter_genius
		}

		add_ace = {
			name = Gunther
			surname = Rall
			callsign = Adlerauge #Made-up nickname
			type = fighter_genius
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = messerschmitt
				}
				swap_ideas = {
					remove_idea = messerschmitt
					add_idea = GER_messerschmitt_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = messerschmitt
						add_idea = GER_messerschmitt_improved
					}
				}
			}
		}
		else = {
			mio:GEK_messerschmitt_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_reorganize_the_luftwaffe
		text = GER_reorganize_the_luftwaffe
	icon = GFX_goal_generic_build_airforce
	prerequisite = { focus = GEAF_form_the_jagdwaffe }

	x = -2
	y = 1
	relative_position_id = GEAF_form_the_jagdwaffe
	cost = 10
	available = {
	}

	search_filters = { FOCUS_FILTER_AIR_XP FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		add_command_power = 25
		air_experience = 25

		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_reorganize_the_luftwaffe
			cost_reduction = 0.25
			uses = 2
			category = air_doctrine
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_manpower_requirement_factor = -0.1
			tooltip = air_manpower_requirement_factor_tt
		}

		#custom_effect_tooltip = generic_skip_one_line_tt
		#custom_effect_tooltip = available_chief_of_airforce
		#show_ideas_tooltip = GER_helmuth_wilberg
	}
}

shared_focus = {
	id = GEAF_solve_the_logistical_bottlenecks
		text = GER_solve_the_logistical_bottlenecks
	icon = GFX_goal_generic_air_production
	prerequisite = { focus = GEAF_reorganize_the_luftwaffe }

	x = -1
	y = 2
	relative_position_id = GEAF_reorganize_the_luftwaffe
	cost = 10
	available = {
	}

	search_filters = {}

	completion_reward = {
		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_accidents_factor = -0.1
			tooltip = air_accidents_factor_tt
		}
		add_to_variable = { 
			GER_military_air_fuel_consumption_factor = -0.1
			tooltip = air_fuel_consumption_factor_tt
		}
	}
}

shared_focus = {
	id = GEAF_experimental_rotorcrafts
		text = GER_experimental_rotorcrafts
	icon = GFX_focus_generic_early_helicopter
	prerequisite = { focus = GEAF_form_the_jagdwaffe }

	x = 0
	y = 1
	relative_position_id = GEAF_form_the_jagdwaffe

	allow_branch = {
		has_dlc = "Gotterdammerung"
	}

	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_RESEARCH }

	completion_reward = {
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { is_special_project_completed = sp:sp_air_helicopter }
			}
			GER_add_or_modify_wunderwaffen = yes
			add_to_variable = { 
				GER_wunderwaffen_sp_air_helicopter_speed_factor = GER_wunderwaffe_research_speed_bonus
				tooltip = sp_air_helicopter_speed_factor_tt
			}
			custom_effect_tooltip = generic_skip_one_line_tt
		}

		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			mio:GEK_focke_achgelis_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_develop_the_knickebein
		text = GER_develop_the_knickebein
	icon = GFX_goal_generic_radar
	prerequisite = { focus = GEAF_form_the_jagdwaffe }

	x = 2
	y = 1
	relative_position_id = GEAF_form_the_jagdwaffe
	cost = 5
	available = {
		is_special_project_completed = sp:sp_air_radar
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		add_timed_idea = {
			idea = GER_knickebein
			days = 545
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_develop_the_knickebein
			bonus = 0.5
			uses = 1
			category = radar_tech
		}

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = focke_wulf
				}
				swap_ideas = {
					remove_idea = focke_wulf
					add_idea = GER_focke_wulf_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = focke_wulf
						add_idea = GER_focke_wulf_improved
					}
				}
			}
		}
		else = {
			mio:GEK_focke_wulf_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_defense_of_the_reich
		text = GER_defense_of_the_reich
	icon = GFX_goal_generic_CAS
	prerequisite = { focus = GEAF_reorganize_the_luftwaffe focus = GEAF_develop_the_knickebein }

	x = 2
	y = 2
	relative_position_id = GEAF_reorganize_the_luftwaffe
	cost = 10
	available = {
		has_war_with_major = yes
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		add_timed_idea = {
			idea = GER_defense_of_the_reich_ns
			days = 730
		}
	}
}

shared_focus = {
	id = GEAF_construct_the_kammhuber_line
		text = GER_construct_the_kammhuber_line
	icon = GFX_focus_generic_energy
	prerequisite = { focus = GEAF_defense_of_the_reich }

	x = -1
	y = 1
	relative_position_id = GEAF_defense_of_the_reich
	cost = 5
	available = {
		has_war_with_major = yes
		has_tech = cavity_magnatron
		custom_trigger_tooltip = {
			tooltip = GER_controls_atlantic_coast_brittany_finnmark_tt
			OR = {
				925 = { #Finnmark
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				924 = { #Troms
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				144 = { #Nordland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				923 = { #Helgeland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				143 = { #Trondelag
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				142 = { #Vestlandet
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				922 = { #Agder
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				921 = { #Telemark
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				110 = { #Oslo
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				915 = { #Halland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				140 = { #Västergötland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				99 = { #Jylland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				912 = { #Sonderjylland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				36 = { #Friesland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				7 = { #Holland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				35 = { #Brabant
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				6 = { #Vlaanderen
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				29 = { #Nord-Pas-de_calais
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				785 = { #Picardy
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				15 = { #Normandy
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				14 = { #Brittany
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
			}
		}
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		add_timed_idea = {
			idea = GER_the_kammhuber_line
			days = 365
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_controls_atlantic_coast_brittany_finnmark_effects_tt
		every_state = {
			limit = { 
				anti_air_building < 5
				state_is_fully_controlled_by_ROOT_or_subject = yes
				is_coastal = yes 
				OR = {
					state = 925
					state = 924
					state = 144
					state = 923
					state = 143
					state = 142
					state = 922
					state = 921
					state = 110
					state = 915
					state = 140
					state = 99
					state = 912
					state = 909
					state = 58 
					state = 59
					state = 56
					state = 36
					state = 7
					state = 35
					state = 6
					state = 977
					state = 29
					state = 785
					state = 15
					state = 14
				}
			}
			add_building_construction = {
				type = anti_air_building
				level = 1
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = GEAF_establish_night_fighter_squadrons
		text = GER_establish_night_fighter_squadrons
	icon = GFX_goal_generic_air_fighter2
	prerequisite = { focus = GEAF_defense_of_the_reich }

	x = 1
	y = 1
	relative_position_id = GEAF_defense_of_the_reich
	cost = 5
	available = {
		has_tech = centimetric_radar
		has_war_with_major = yes
	}

	search_filters = { FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		add_timed_idea = {
			idea = GER_nachtjagdgeschwader
			days = 365
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_ace = {
			name = Heinz
			surname = Schnaufer
			callsign = "The Spook" #actually "The Spook of St. Trond"
			type = fighter_unique
		}
		add_ace = {
			name = Helmut
			surname = Lent
			callsign = "The Moonlight Hunter" #made-up
			type = fighter_unique
		}
	}
}

shared_focus = {
	id = GEAF_torpedobomber
		text = GER_torpedobomber
	icon = GFX_goal_generic_air_naval_bomber
	prerequisite = { focus = GEAF_develop_the_knickebein }

	x = 0
	y = 1
	relative_position_id = GEAF_develop_the_knickebein
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		add_tech_bonus = {
			name = GER_torpedobomber
			bonus = 0.5
			uses = 1
			category = cat_air_bombs
		}


		if = {
			limit = {
				has_dlc = "By Blood Alone"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = { 
				name = "He 115" 
				type = small_plane_naval_bomber_airframe_2
				allow_without_tech = no
				design_team = mio:GEK_fieseler_organization
				modules = {
					fixed_main_weapon_slot = torpedo_mounting
					fixed_auxiliary_weapon_slot_1 = bomb_locks
					engine_type_slot = engine_2_2x
					special_type_slot_1 = lmg_defense_turret	
					special_type_slot_2 = empty
				}
				icon = "GFX_GER_naval_bomber2_medium"
				model = "GER_nav_bomber_equipment_2_entity"
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_nav_efficiency = 0.1
			tooltip = air_nav_efficiency_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = GER_fieseler
				}
				swap_ideas = {
					remove_idea = GER_fieseler
					add_idea = GER_fieseler_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_fieseler
						add_idea = GER_fieseler_improved
					}
				}
			}
		}
		else = {
			mio:GEK_fieseler_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_establish_carrier_groups
		text = GER_establish_carrier_groups
	icon = GFX_goal_generic_navy_carrier
	prerequisite = { focus = GEAF_torpedobomber }
	prerequisite = { focus = GEAF_construct_aircraft_carriers }

	x = 1
	y = 1
	relative_position_id = GEAF_torpedobomber
	cost = 10
	available = {
	}

	search_filters = { FOCUS_FILTER_RESEARCH }

	completion_reward = {
		add_ideas = GER_tragergruppen_ns

		if = {
			limit = {
				has_dlc = "Gotterdammerung"
				NOT = { is_special_project_completed = sp:sp_naval_modern_carrier }
			}
			custom_effect_tooltip = generic_skip_one_line_tt

			GER_add_or_modify_wunderwaffen = yes
			add_to_variable = { 
				GER_wunderwaffen_sp_naval_modern_carrier_speed_factor = GER_wunderwaffe_research_speed_bonus
				tooltip = sp_naval_modern_carrier_speed_factor_tt
			}
		}
	}
}

shared_focus = {
	id = GEAF_aerodynamic_research_institute
		text = GER_aerodynamic_research_institute
	icon = GFX_focus_generic_aircraft_production
	prerequisite = { focus = GEAF_solve_the_logistical_bottlenecks focus = GEAF_construct_the_kammhuber_line focus = GEAF_establish_night_fighter_squadrons}
	prerequisite = { focus = GEAF_rocketry_innovations }

	x = 0
	y = 2
	relative_position_id = GEAF_solve_the_logistical_bottlenecks
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_HISTORICAL FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		if = {
			limit = {
				controls_state = 59
			}
			59 = { #Hannover
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		else = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.5
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_dlc = "By Blood Alone"
			}
			create_equipment_variant = { 
				name = "Me 262" 
				allow_without_tech = no
				type = small_plane_airframe_4
				design_team = mio:GEK_messerschmitt_organization
				modules = {
					fixed_main_weapon_slot = aircraft_cannon_2_2x
					fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
					engine_type_slot = jet_engine_2x
					special_type_slot_1 = armor_plate_small
					special_type_slot_2 = drop_tanks	
					special_type_slot_3 = self_sealing_fuel_tanks_small	
				}
				icon = "GFX_GER_jet_plane_1_medium"
				model = "GER_jet_plane_entity"
			}
			create_equipment_variant = { 
				name = "Ar 234" 
				allow_without_tech = no
				type = medium_plane_airframe_4
				design_team = mio:GEK_dornier_organization
				modules = {
					fixed_main_weapon_slot = medium_bomb_bay
					fixed_auxiliary_weapon_slot_1 = medium_bomb_bay
					fixed_auxiliary_weapon_slot_2 = bomb_locks
					engine_type_slot = jet_engine_2x
					special_type_slot_1 = fuel_tanks_medium
					special_type_slot_2 = empty	
				}
				icon = "GFX_medium_plane_4_medium"
				model = "GER_medium_jet_plane_1_entity"
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}


		GER_modify_airforce_modifier = yes
		add_to_variable = { 
			GER_military_air_agility_factor = 0.05
			tooltip = air_agility_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_add_or_modify_wunderwaffen = yes
		add_to_variable = { 
			GER_wunderwaffen_sp_tag_jet_speed_factor = GER_wunderwaffe_research_speed_bonus
			tooltip = sp_tag_jet_speed_factor_tt
		}

		IF = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			custom_effect_tooltip = GER_aerodynamic_research_institute_tt
		}
	}
}

shared_focus = {
	id = GEAF_amerikabomber
		text = GER_amerikabomber
	icon = GFX_focus_GER_amerikabomber
	prerequisite = { focus = GEAF_aerodynamic_research_institute }

	x = 0
	y = 1
	relative_position_id = GEAF_aerodynamic_research_institute
	cost = 10

	continue_if_invalid = yes
	cancel_if_invalid = no

	available = {
		custom_trigger_tooltip = {
			tooltip = GER_war_with_american_country_tt
			 any_enemy_country = {
				capital_scope = { 
					OR = {
						is_on_continent = north_america
						is_on_continent = south_america
					}
				}
			}
		}
	}

	search_filters = { FOCUS_FILTER_RESEARCH }

	select_effect = {
		if = {
			limit = {
				OR = {
					NOT = { has_dlc = "Gotterdammerung" }
					NOT = {
						is_special_project_being_researched = sp:sp_air_intercontinental_bomber
					}
				}
			}
			country_event = { id = GOT_GER_amerikabomber.01 days = 14 random_days = 7 }
		}
	}

	completion_reward = {
		if = {
			limit = {
				has_dlc = "Gotterdammerung"
			}
			custom_effect_tooltip = GER_unlocks_statue_of_liberty_raid_tt

			custom_effect_tooltip = generic_skip_one_line_tt

			GER_add_or_modify_wunderwaffen = yes
			if = {
				limit = {
					NOT = { is_special_project_completed = sp_air_intercontinental_bomber }
				}
				add_to_variable = { 
					GER_wunderwaffen_sp_air_intercontinental_bomber_speed_factor = 0.2 #MM: This is the focus of this focus, so extra speed
					tooltip = sp_air_intercontinental_bomber_speed_factor_tt
				}
			}
			if = {
				limit = {
					NOT = { is_special_project_completed = sp_air_mothership_aircraft }
				}
				add_to_variable = { 
					GER_wunderwaffen_sp_air_mothership_aircraft_speed_factor = GER_wunderwaffe_research_speed_bonus
					tooltip = sp_air_mothership_aircraft_speed_factor_tt
				}
			}
		}
		else = {
			add_tech_bonus = {
				name = GER_amerikabomber
				bonus = 2
				uses = 1
				category = transport_planes_cat
				category = cat_strategic_bomber
			}
		}
	}
}



#KRIEGSMARINE
shared_focus = {
	id = GEAF_strengthen_the_kriegsmarine
		text = GER_strengthen_the_kriegsmarine
	icon = GFX_focus_GER_navy
	#prerequisite = { focus = }

	x = 12
	y = 0
	relative_position_id = GEAF_expanding_the_luftwaffe
	cost = 5
	available = {
		OR = {
			original_tag = GEK
			has_country_flag = GEAF_strengthen_the_kriegsmarine_flag
		}
	}

	search_filters = { FOCUS_FILTER_NAVY_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		#NAVY
		#REMINDER to always update the fake NS if these numbers are altered!
		set_variable = { GER_military_naval_heavy_gun_hit_chance_factor = 0 }
		set_variable = { GER_military_screening_efficiency = 0 }
		set_variable = { GER_military_screening_without_screens = 0.1 }
		set_variable = { GER_military_navy_max_range_factor = 0 }
		set_variable = { GER_military_convoy_raiding_efficiency_factor = 0 }
		set_variable = { GER_military_naval_light_gun_hit_chance_factor = 0 }
		set_variable = { GER_military_naval_hit_chance = 0 }
		set_variable = { GER_military_naval_defense_factor = -0.1}
		add_dynamic_modifier = { modifier = GER_navy_fascist_modifier }
		navy_experience = 25
		custom_effect_tooltip = generic_skip_one_line_tt
		every_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				is_coastal = yes
				free_building_slots = {
					building = dockyard
					size > 1
					include_locked = yes
				}
			}
			random_select_amount = 2
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
		}
	}
}

shared_focus = {
	id = GEAF_plan_z
		text = GER_plan_z
	icon = GFX_focus_generic_air_carrier
	prerequisite = { focus = GEAF_strengthen_the_kriegsmarine }

	x = -2
	y = 1
	relative_position_id = GEAF_strengthen_the_kriegsmarine
	cost = 5
	available = {
		OR = {
			NOT = { has_completed_focus = GEAF_trade_interdiction }
			has_completed_focus = GEAF_unrestricted_convoy_raiding
		}
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL }

	complete_tooltip = {
	}
	completion_reward = {
		add_doctrine_cost_reduction = {
			name = GER_plan_z
			cost_reduction = 0.25
			uses = 3
			category = fleet_in_being_tree
		}

		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			mio:GEK_germaniawerft_organization = {
				unlock_mio_trait_tooltip = GER_mio_trait_history_of_battleships
				#unlock_mio_trait_tooltip = 
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = GER_plan_z_lock_other_focus_tt
	}
}

shared_focus = {
	id = GEAF_expand_kriegsmarinewerft
		text = GER_expand_kriegsmarinewerft
	icon = GFX_focus_POL_develop_polish_shipbuilding
	prerequisite = { focus = GEAF_plan_z }

	x = -2
	y = 1
	relative_position_id = GEAF_plan_z
	cost = 10
	available = {
		#NOT = { has_completed_focus = GEAF_high_seas_fleet }
	}

	search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL }

	completion_reward = {
		if = {
			limit = {
				56 = {
					is_fully_controlled_by = ROOT
				}
			}
			56 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
		else = {
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_expand_kriegsmarinewerft
			bonus = 0.5
			uses = 1
			category = bc_tech
		}
		add_tech_bonus = {
			name = GER_expand_kriegsmarinewerft
			bonus = 1.0
			uses = 1
			category = cv_tech
		}

		if = {
			limit = { 
				has_dlc = "Man the Guns"
				is_special_project_completed = sp:sp_air_radar
				has_tech = improved_heavy_battery
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Bismarck"				
				name_group = GER_BB_HISTORICAL
				type = ship_hull_heavy_2
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_3
					fixed_ship_anti_air_slot = ship_anti_air_1
					fixed_ship_fire_control_system_slot = ship_fire_control_system_0
					fixed_ship_radar_slot = ship_radar_1
					fixed_ship_engine_slot = heavy_ship_engine_2
					fixed_ship_secondaries_slot = ship_secondaries_1
					fixed_ship_armor_slot = ship_armor_bb_2
					front_1_custom_slot = ship_anti_air_1
					mid_1_custom_slot = ship_airplane_launcher_1
					mid_2_custom_slot = ship_secondaries_1
					rear_1_custom_slot = ship_heavy_battery_3
				}
				design_team = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Bismarck"
				requested_factories = 1
				progress = 0.3
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Tirpitz"
				requested_factories = 1
				progress = 0.15
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
		}
		else_if = {
			limit = {
				has_dlc = "Man the Guns"
				is_special_project_completed = sp:sp_air_radar
				NOT = {
					has_tech = improved_heavy_battery
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Bismarck"				
				name_group = GER_BB_HISTORICAL
				type = ship_hull_heavy_2
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_2
					fixed_ship_anti_air_slot = ship_anti_air_1
					fixed_ship_fire_control_system_slot = ship_fire_control_system_0
					fixed_ship_radar_slot = ship_radar_1
					fixed_ship_engine_slot = heavy_ship_engine_2
					fixed_ship_secondaries_slot = ship_secondaries_1
					fixed_ship_armor_slot = ship_armor_bb_2
					front_1_custom_slot = ship_anti_air_1
					mid_1_custom_slot = ship_airplane_launcher_1
					mid_2_custom_slot = ship_secondaries_1
					rear_1_custom_slot = ship_heavy_battery_2
				}
				design_team = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Bismarck"
				requested_factories = 1
				progress = 0.3
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Tirpitz"
				requested_factories = 1
				progress = 0.15
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
		}
		else_if = {
			limit = {
				has_dlc = "Man the Guns"
				has_tech = improved_heavy_battery
				NOT = {
					is_special_project_completed = sp:sp_air_radar
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Bismarck"				
				name_group = GER_BB_HISTORICAL
				type = ship_hull_heavy_2
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_3
					fixed_ship_anti_air_slot = ship_anti_air_1
					fixed_ship_fire_control_system_slot = ship_fire_control_system_0
					fixed_ship_radar_slot = empty
					fixed_ship_engine_slot = heavy_ship_engine_2
					fixed_ship_secondaries_slot = ship_secondaries_1
					fixed_ship_armor_slot = ship_armor_bb_2
					front_1_custom_slot = ship_anti_air_1
					mid_1_custom_slot = ship_airplane_launcher_1
					mid_2_custom_slot = ship_secondaries_1
					rear_1_custom_slot = ship_heavy_battery_3
				}
				design_team = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Bismarck"
				requested_factories = 1
				progress = 0.3
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Tirpitz"
				requested_factories = 1
				progress = 0.15
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
		}
		else_if = {
			limit = {
				has_dlc = "Man the Guns"
				NOT = {
					is_special_project_completed = sp:sp_air_radar
					has_tech = improved_heavy_battery
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Bismarck"				
				name_group = GER_BB_HISTORICAL
				type = ship_hull_heavy_2
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_2
					fixed_ship_anti_air_slot = ship_anti_air_1
					fixed_ship_fire_control_system_slot = ship_fire_control_system_0
					fixed_ship_radar_slot = empty
					fixed_ship_engine_slot = heavy_ship_engine_2
					fixed_ship_secondaries_slot = ship_secondaries_1
					fixed_ship_armor_slot = ship_armor_bb_2
					front_1_custom_slot = ship_anti_air_1
					mid_1_custom_slot = ship_airplane_launcher_1
					mid_2_custom_slot = ship_secondaries_1
					rear_1_custom_slot = ship_heavy_battery_2
				}
				design_team = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Bismarck"
				requested_factories = 1
				progress = 0.3
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_2
					creator = "GER"
					version_name = "Bismarck"
				}
				name = "Tirpitz"
				requested_factories = 1
				progress = 0.15
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = GER_kriegsmarinewerft_wilhelmshaven
				}
				swap_ideas = {
					remove_idea = GER_kriegsmarinewerft_wilhelmshaven
					add_idea = GER_kriegsmarinewerft_wilhelmshaven_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_kriegsmarinewerft_wilhelmshaven
						add_idea = GER_kriegsmarinewerft_wilhelmshaven_improved
					}
				}
			}
		}
		else = {
			mio:GEK_kriegsmarinewerft_wilhelmshaven_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_construct_aircraft_carriers
		text = GER_construct_aircraft_carriers
	icon = GFX_focus_GER_graf_zeppelin
	prerequisite = { focus = GEAF_expand_kriegsmarinewerft }

	x = -1
	y = 1
	relative_position_id = GEAF_expand_kriegsmarinewerft
	cost = 5
	available = {
		NOT = { has_completed_focus = GEAF_high_seas_fleet }
		has_tech = early_ship_hull_carrier
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		random_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				is_coastal = yes
				free_building_slots = {
					building = dockyard
					size > 0
					include_locked = yes
				}
			}
			prioritize = { 807 }
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		random_navy_leader = {
			limit = {
				NOT = {
					is_character = GEK_erich_raeder
					is_character = GEK_karl_donitz
				}
				OR = {
					NOT = { has_trait = air_controller }
					AND = {
						has_trait = air_controller
						NOT = { has_trait = flight_deck_manager }
					}
				}
			}
			if = {
				limit = {
					has_trait = air_controller
				}
				add_trait = { trait = flight_deck_manager }

			}
			else = {
				add_trait = { trait = air_controller }
			}
		}

		if = {
			limit = { 
				has_dlc = "Man the Guns"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			custom_effect_tooltip = GER_carrier_variants_tt
			if = { 
				limit = {
					NOT = {
						has_tech = basic_ship_hull_carrier
						has_tech = improved_ship_hull_carrier
					}
				}
				create_equipment_variant = {
					name = "Graf Zeppelin Class"				
					name_group = GER_CV_HISTORICAL
					type = ship_hull_carrier_conversion_ca
					modules = {
						fixed_ship_deck_slot_1 = ship_deck_space
						fixed_ship_deck_slot_2 = ship_deck_space
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_engine_slot = cruiser_ship_engine_2
						fixed_ship_secondaries_slot = empty
					}
					design_team = mio:GEK_deutsche_werke_organization
				}
				add_equipment_production = { #You get a Converted Carrier
					equipment = {
						type = ship_hull_carrier_conversion_ca
						creator = "GER"
						version_name = "Graf Zeppelin Class"
					}
					name = "Graf Zeppelin"
					requested_factories = 1
					progress = 0.3
					amount = 1
					industrial_manufacturer = mio:GEK_deutsche_werke_organization
				}
			}
			if = { 
				limit = {
					has_tech = basic_ship_hull_carrier
					NOT = {
						has_tech = improved_ship_hull_carrier
					}
				}
				create_equipment_variant = {
					name = "Graf Zeppelin Class"				
					name_group = GER_CV_HISTORICAL
					type = ship_hull_carrier_1
					modules = {
						fixed_ship_deck_slot_1 = ship_deck_space
						fixed_ship_deck_slot_2 = ship_deck_space
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_engine_slot = carrier_ship_engine_3
						fixed_ship_secondaries_slot = empty
						front_1_custom_slot = ship_deck_space
					}
					design_team = mio:GEK_deutsche_werke_organization
				}		
				add_equipment_production = {
					equipment = {
						type = ship_hull_carrier_1
						creator = "GER"
						version_name = "Graf Zeppelin Class"
					}
					name = "Graf Zeppelin"
					requested_factories = 1
					progress = 0.3
					amount = 1
					industrial_manufacturer = mio:GEK_deutsche_werke_organization
				}
			}
			if = { 
				limit = {
					has_tech = improved_ship_hull_carrier
				}
				create_equipment_variant = {
					name = "Graf Zeppelin Class"				
					name_group = GER_CV_HISTORICAL
					type = ship_hull_carrier_2
					modules = {
						fixed_ship_deck_slot_1 = ship_deck_space
						fixed_ship_deck_slot_2 = ship_deck_space
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_engine_slot = carrier_ship_engine_2
						fixed_ship_secondaries_slot = empty
						front_1_custom_slot = ship_deck_space
						mid_1_custom_slot = ship_deck_space
					}
					design_team = mio:GEK_deutsche_werke_organization
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_carrier_2
						creator = "GER"
						version_name = "Graf Zeppelin Class"
					}
					name = "Graf Zeppelin"
					requested_factories = 1
					progress = 0.3
					amount = 1
					industrial_manufacturer = mio:GEK_deutsche_werke_organization
				}
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = GER_deutsche_werke
				}
				swap_ideas = {
					remove_idea = GER_deutsche_werke
					add_idea = GER_deutsche_werke_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_deutsche_werke
						add_idea = GER_deutsche_werke_improved
					}
				}
			}
		}
		else = {
			mio:GEK_deutsche_werke_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_grosskampfschiff_construction
		text = GER_grosskampfschiff_construction
	icon = GFX_focus_generic_navy_battleship2
	prerequisite = { focus = GEAF_expand_kriegsmarinewerft }

	x = 1
	y = 1
	relative_position_id = GEAF_expand_kriegsmarinewerft
	cost = 10
	available = {
		NOT = { has_completed_focus = GEAF_high_seas_fleet }
		has_tech = improved_ship_hull_heavy
	}

	search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_INDUSTRY }

	completion_reward = {

		random_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				is_coastal = yes
				free_building_slots = {
					building = dockyard
					size > 0
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_grosskampfschiff_construction
			bonus = 0.5
			uses = 1
			category = bb_tech
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		random_navy_leader = {
			limit = {
				NOT = {
					is_character = GEK_erich_raeder
					is_character = GEK_karl_donitz
				}
				NOT = { has_trait = battleship_adherent }
			}
			add_trait = { trait = battleship_adherent }
		}

		if = {
			limit = { 
				has_dlc = "Man the Guns"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Hindenburg"				
				name_group = GER_BB_HISTORICAL
				type = ship_hull_heavy_3
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_3
					fixed_ship_anti_air_slot = ship_anti_air_1
					fixed_ship_fire_control_system_slot = ship_fire_control_system_0
					fixed_ship_radar_slot = ship_radar_1
					fixed_ship_engine_slot = heavy_ship_engine_2
					fixed_ship_secondaries_slot = ship_secondaries_1
					fixed_ship_armor_slot = ship_armor_bb_2
					front_1_custom_slot = ship_anti_air_1
					mid_1_custom_slot = ship_airplane_launcher_1
					mid_2_custom_slot = ship_secondaries_1
					mid_3_custom_slot = ship_anti_air_1
					rear_1_custom_slot = ship_heavy_battery_3
				}
				design_team = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_3
					creator = "GER"
					version_name = "Hindenburg"
				}
				name = "Hutten"
				requested_factories = 1
				progress = 0.2
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_3
					creator = "GER"
					version_name = "Hindenburg"
				}
				name = "Berlichingen"
				requested_factories = 1
				progress = 0.1
				amount = 1
				industrial_manufacturer = mio:GEK_germaniawerft_organization
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_navy_modifier = yes
		add_to_variable = { 
			GER_military_naval_heavy_gun_hit_chance_factor = 0.05
			tooltip = naval_heavy_gun_hit_chance_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_dlc = "Gotterdammerung"
				NOT = { is_special_project_completed = sp:sp_naval_modern_battleship }
			}
			GER_add_or_modify_wunderwaffen = yes
			add_to_variable = { 
				GER_wunderwaffen_sp_naval_modern_battleship_speed_factor = GER_wunderwaffe_research_speed_bonus
				tooltip = sp_naval_modern_battleship_speed_factor_tt
			}
			custom_effect_tooltip = generic_skip_one_line_tt
		}

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = germaniawerft
				}
				swap_ideas = {
					remove_idea = germaniawerft
					add_idea = GER_germaniawerft_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = germaniawerft
						add_idea = GER_germaniawerft_improved
					}
				}
			}
		}
		else = {
			mio:GEK_germaniawerft_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				unlock_mio_trait_tooltip = GER_mio_trait_h_class_battleships
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_high_seas_fleet
		text = GER_high_seas_fleet
	icon = GFX_focus_GER_high_seas_fleet
	prerequisite = { focus = GEAF_expand_kriegsmarinewerft }

	x = 1
	y = 1
	relative_position_id = GEAF_construct_aircraft_carriers
	cost = 10
	available = {
	}

	search_filters = { FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		if = {
			limit = {
				NOT = { has_completed_focus = GEAF_trade_interdiction }
			}
			custom_effect_tooltip = GER_unlock_trade_interdiction_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_navy_modifier = yes
		add_to_variable = { 
			GER_military_naval_defense_factor = 0.05
			tooltip = naval_defense_factor_tt
		}
		add_to_variable = { 
			GER_military_naval_hit_chance = 0.05
			tooltip = naval_hit_chance_tt
		}
		add_to_variable = { 
			GER_military_screening_efficiency = 0.1
			tooltip = screening_efficiency_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = GER_deschimag
				}
				swap_ideas = {
					remove_idea = GER_deschimag
					add_idea = GER_deschimag_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_deschimag
						add_idea = GER_deschimag_improved
					}
				}
			}
		}
		else = {
			mio:GEK_deschimag_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				#unlock_mio_trait_tooltip = 
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_re_establish_the_seekriegsleitung
		text = GER_re_establish_the_seekriegsleitung
	icon = GFX_goal_generic_build_navy
	prerequisite = { focus = GEAF_strengthen_the_kriegsmarine }

	x = 0
	y = 2
	relative_position_id = GEAF_strengthen_the_kriegsmarine
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		add_command_power = 25

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_navy_modifier = yes
		add_to_variable = { 
			GER_military_navy_max_range_factor = 0.1
			tooltip = navy_max_range_factor_tt
		}
		
		custom_effect_tooltip = generic_skip_one_line_tt

		add_doctrine_cost_reduction = {
			name = GER_re_establish_the_seekriegsleitung
			cost_reduction = 0.5
			uses = 1
			category = naval_doctrine
		}

		#custom_effect_tooltip = generic_skip_one_line_tt
		#custom_effect_tooltip = available_chief_of_navy
		#show_ideas_tooltip = GER_rolf_carls
	}
}

shared_focus = {
	id = GEAF_marinestosstrupp
		text = GER_marinestosstrupp
	icon = GFX_goal_generic_amphibious_assault
	prerequisite = { focus = GEAF_re_establish_the_seekriegsleitung }

	x = -1
	y = 1
	relative_position_id = GEAF_re_establish_the_seekriegsleitung
	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_RESEARCH }

	completion_reward = {
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			if = {
				limit = {
					NOT = { has_completed_focus = GEAF_fallschirmjager }
				}
				add_potential_special_forces_tree = yes
			}
			add_doctrine_cost_reduction = {
				name = GER_marinestosstrupp
				cost_reduction = 0.25
				uses = 2
				category = cat_marines_doctrine
			}
		}
		add_tech_bonus = {
			name = GER_marinestosstrupp
			bonus = 1
			uses = 1
			category = marine_tech
		}

		custom_effect_tooltip = generic_skip_one_line_tt
		GER_modify_army_modifier = yes
		add_to_variable = { 
			GER_military_special_forces_cap = 0.05
			tooltip = special_forces_cap_tt
		}
	}
}

shared_focus = {
	id = GEAF_atlantic_naval_bases
		text = GER_atlantic_naval_bases
	icon = GFX_focus_generic_atlantic_coast
	prerequisite = { focus = GEAF_re_establish_the_seekriegsleitung }

	x = 1
	y = 1
	relative_position_id = GEAF_re_establish_the_seekriegsleitung
	cost = 5
	available = { #These states start out with naval bases in western France
		14 = { #Brittany
			state_is_fully_controlled_by_ROOT_or_subject = yes
		}
		23 = { #Poitou
			state_is_fully_controlled_by_ROOT_or_subject = yes
		}
		19 = { #Aquitaine
			state_is_fully_controlled_by_ROOT_or_subject = yes
		}

	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		
		custom_effect_tooltip = GER_naval_bases_along_atlantic_coast_tt

		every_state = {
			limit = { 
				state_is_fully_controlled_by_ROOT_or_subject = yes
				is_coastal = yes 
				naval_base < 10
				OR = { #Atlantic Coast from Brittany to Sevilla
					state = 14
					state = 30
					state = 23
					state = 19
					state = 806
					state = 792
					state = 790
					state = 171
					state = 180
					state = 112
					state = 179
					state = 169
				}
			}
			add_building_construction = {
				type = naval_base
				level = 1
				instant_build = yes
				province = {
					all_provinces = yes
					limit_to_naval_base = yes
				}
			}
		}
		every_state = {
			limit = { 
				state_is_fully_controlled_by_ROOT_or_subject = yes
				is_coastal = yes 
				coastal_bunker < 10
				OR = { #Atlantic Coast from Brittany to Sevilla
					state = 14
					state = 30
					state = 23
					state = 19
					state = 806
					state = 792
					state = 790
					state = 171
					state = 180
					state = 112
					state = 179
					state = 169
				}
			}
			add_building_construction = {
				type = coastal_bunker
				level = 1
				instant_build = yes
				province = {
					all_provinces = yes
					limit_to_naval_base = yes
				}
			}
		}
	}
}

shared_focus = {
	id = GEAF_atlantic_naval_dominance
		text = GER_atlantic_naval_dominance
	icon = GFX_focus_generic_north_atlantic_fleet
	prerequisite = { focus = GEAF_marinestosstrupp focus = GEAF_atlantic_naval_bases}

	x = 1
	y = 1
	relative_position_id = GEAF_marinestosstrupp
	cost = 10
	available = {
		custom_trigger_tooltip = {
			tooltip = GER_controls_an_atantic_island_tt
			OR = {
				914 = { #Jan Mayen
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				100 = { #Iceland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				101 = { #Greenland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				337 = { #Faroes
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				933 = { #Shetlands
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				134 = { #Ireland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				119 = { #North Ireland
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				178 = { #The Canaries
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				698 = { #The Azores
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				696 = { #Bermuda
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				697 = { #Madeira
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				702 = { #Cape Verde
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
			}
		}
	}

	search_filters = { FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		GER_modify_navy_modifier = yes
		add_to_variable = { 
			GER_military_navy_max_range_factor = 0.1
			tooltip = navy_max_range_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		custom_effect_tooltip = GER_naval_bases_on_atlantic_islands_tt
		every_state = {
			limit = { 
				state_is_fully_controlled_by_ROOT_or_subject = yes
				is_coastal = yes 
				naval_base < 10
				OR = { #Atlantic Islands from Greenland to Cape Verde
					state = 914
					state = 101
					state = 100
					state = 337
					state = 933
					state = 134
					state = 119
					state = 178
					state = 698
					state = 696
					state = 697
					state = 702
				}
			}
			add_building_construction = {
				type = naval_base
				level = 1
				instant_build = yes
				province = {
					all_provinces = yes
					limit_to_naval_base = yes
				}
			}
		}
		every_state = {
			limit = { 
				state_is_fully_controlled_by_ROOT_or_subject = yes
				is_coastal = yes 
				coastal_bunker < 10
				OR = { #Atlantic Islands from Greenland to the Falklands
					state = 101
					#state = 914 #Not you Jan Mayen
					state = 100
					state = 337
					state = 933
					state = 134
					state = 119
					state = 178
					state = 698
					state = 696
					state = 697
					state = 702
					state = 703
					state = 704
					state = 297
					state = 705
					state = 697
					state = 720
					state = 299
				}
			}
			add_building_construction = {
				type = coastal_bunker
				level = 1
				instant_build = yes
				province = {
					all_provinces = yes
					limit_to_naval_base = yes
				}
			}
		}
	}
}

shared_focus = {
	id = GEAF_trade_interdiction
		text = GER_trade_interdiction

	icon = GFX_focus_generic_trade_interdiction
	alternate_icon = GFX_focus_GER_trade_interdiction_historical

	prerequisite = { focus = GEAF_strengthen_the_kriegsmarine }

	x = 2
	y = 1
	relative_position_id = GEAF_strengthen_the_kriegsmarine
	cost = 5

	available = {
		OR = {
			NOT = { has_completed_focus = GEAF_plan_z }
			has_completed_focus = GEAF_high_seas_fleet
		}
	}

	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER }

	complete_tooltip = {
	}
	completion_reward = {
		add_doctrine_cost_reduction = {
			name = GER_trade_interdiction
			cost_reduction = 0.25
			uses = 2
			category = trade_interdiction_tree	
		}

		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = GER_trade_interdiction_lock_other_focus_tt

		IF = {
			limit = {
				GEK_karl_donitz = {
					is_unit_leader = yes
				}
			}
			#custom_effect_tooltip = generic_skip_one_line_tt
			#custom_effect_tooltip = available_chief_of_navy
			#show_ideas_tooltip = donitz
		}
	}
}

shared_focus = {
	id = GEAF_cruiser_warfare
		text = GER_cruiser_warfare
	icon = GFX_focus_generic_cruiser2
	prerequisite = { focus = GEAF_trade_interdiction }

	x = 1
	y = 1
	relative_position_id = GEAF_trade_interdiction
	cost = 5
	available = {
		NOT = { has_completed_focus = GEAF_unrestricted_convoy_raiding }
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

	completion_reward = {
		random_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				is_coastal = yes
				free_building_slots = {
					building = dockyard
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_cruiser_warfare
			bonus = 0.5
			uses = 1
			category = cl_tech
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_character = GEK_erich_raeder
				GEK_erich_raeder = {
					is_unit_leader = yes
				}
			}
			if = {
				limit = {
					GEK_erich_raeder = {
						NOT = { has_trait = superior_tactician }
					}
				}
				add_trait = {
					character = GEK_erich_raeder
					trait = superior_tactician
				}
			}
			else_if = {
				limit = {
					GEK_erich_raeder = {
						NOT = { has_trait = cruiser_captain }
					}
				}
				add_trait = { 
					character = GEK_erich_raeder
					trait = cruiser_captain
				}
			}
		}

		GER_modify_navy_modifier = yes
		add_to_variable = { 
			GER_military_convoy_raiding_efficiency_factor = 0.05
			tooltip = convoy_raiding_efficiency_factor_tt
		}
		add_to_variable = { 
			GER_military_naval_light_gun_hit_chance_factor = 0.05
			tooltip = naval_light_gun_hit_chance_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		unlock_decision_tooltip = GER_refit_convoys_to_cruisers

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = blohm_und_voss
				}
				swap_ideas = {
					remove_idea = blohm_und_voss
					add_idea = GER_blohm_und_voss_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = blohm_und_voss
						add_idea = GER_blohm_und_voss_improved
					}
				}
			}
		}
		else = {
			mio:GEK_blohm_und_voss_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				unlock_mio_trait_tooltip = GER_mio_trait_heavy_raiders
				#unlock_mio_trait_tooltip = 
			}
		}
	}
}

shared_focus = {
	id = GEAF_panzerschiff_raiders
		text = GER_panzerschiff_raiders
	icon = GFX_focus_GER_panzerschiff
	prerequisite = { focus = GEAF_cruiser_warfare }
	mutually_exclusive = { focus = GEAF_u_boat_efforts }

	x = 0
	y = 1
	relative_position_id = GEAF_cruiser_warfare
	cost = 5
	available = {
		NOT = { has_completed_focus = GEAF_unrestricted_convoy_raiding }
	}

	search_filters = { FOCUS_FILTER_RESEARCH }

	completion_reward = {
		add_tech_bonus = {
			name = GER_cruiser_warfare
			bonus = 0.5
			uses = 1
			category = ca_tech
		}

		IF = {
			limit = {
				has_dlc =  "Man the Guns"
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			create_equipment_variant = {
				name = "Panzer Class"
				type = ship_hull_cruiser_3
				name_group = GER_CA_HISTORICAL
				modules = {
					fixed_ship_battery_slot = ship_medium_battery_2
					fixed_ship_anti_air_slot = ship_anti_air_1
					fixed_ship_fire_control_system_slot = ship_fire_control_system_0
					fixed_ship_radar_slot = ship_radar_1
					fixed_ship_engine_slot= cruiser_ship_engine_3
					fixed_ship_armor_slot = ship_armor_cruiser_2
					fixed_ship_secondaries_slot = ship_secondaries_1
					front_1_custom_slot = ship_anti_air_1
					mid_1_custom_slot = ship_anti_air_1
					mid_2_custom_slot = ship_airplane_launcher_1
					rear_1_custom_slot = ship_medium_battery_2
				}
			}	
		}

		custom_effect_tooltip = generic_skip_one_line_tt
		
		GER_modify_navy_modifier = yes
		add_to_variable = { 
			GER_military_screening_without_screens = 0.1
			tooltip = screening_without_screens_tt
		}
		add_to_variable = { 
			GER_military_naval_light_gun_hit_chance_factor = 0.05
			tooltip = naval_light_gun_hit_chance_factor_tt
		}
		add_to_variable = { 
			GER_military_naval_heavy_gun_hit_chance_factor = 0.05
			tooltip = naval_heavy_gun_hit_chance_factor_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			mio:GEK_blohm_und_voss_organization = {
				unlock_mio_trait_tooltip = GER_mio_trait_o_class_battlecruisers
			}
		}
	}
}

shared_focus = {
	id = GEAF_wolfpack_tactics
		text = GER_wolfpack_tactics
	icon = GFX_goal_generic_wolf_pack
	prerequisite = { focus = GEAF_trade_interdiction }

	x = 3
	y = 1
	relative_position_id = GEAF_trade_interdiction
	cost = 5
	available = {
		NOT = { has_completed_focus = GEAF_unrestricted_convoy_raiding }
		has_war = yes
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		add_doctrine_cost_reduction = {
			name = GER_wolfpack_tactics
			cost_reduction = 0.25
			uses = 1
			category = trade_interdiction_tree	
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				has_character = GEK_karl_donitz
				GEK_karl_donitz = {
					is_unit_leader = yes
				}

			}
			if = {
				limit = {
					GEK_karl_donitz = {
						NOT = { has_trait = bold }
					}
				}
				add_trait = {
					character = GEK_karl_donitz
					trait = bold
				}
			}
			else_if = {
				limit = {
					GEK_karl_donitz = {
						NOT = { has_trait = spotter }
					}
				}
				add_trait = {
					character = GEK_karl_donitz
					trait = spotter
				}
			}
		}

		add_timed_idea = {
			idea = GER_rudeltaktik_ns
			days = 365
		}

		#custom_effect_tooltip = generic_skip_one_line_tt
		#custom_effect_tooltip = available_theorist
		#show_ideas_tooltip = alfred_saalwachter
	}
}

shared_focus = {
	id = GEAF_u_boat_efforts
		text = GER_u_boat_efforts
	icon = GFX_goal_generic_navy_submarine
	prerequisite = { focus = GEAF_wolfpack_tactics }
	mutually_exclusive = { focus = GEAF_panzerschiff_raiders }
	x = 0
	y = 1
	relative_position_id = GEAF_wolfpack_tactics
	cost = 5
	available = {
		NOT = { has_completed_focus = GEAF_unrestricted_convoy_raiding }
	}

	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	completion_reward = {
		random_core_state = {
			limit = {
				is_fully_controlled_by = ROOT
				is_coastal = yes
				free_building_slots = {
					building = dockyard
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = dockyard
				level = 2
				instant_build = yes
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		add_tech_bonus = {
			name = GER_u_boat_efforts
			bonus = 1.0
			uses = 1
			category = ss_tech
		}
	
		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_navy_modifier = yes
		custom_effect_tooltip = GER_submarine_max_speed_small_tt
		hidden_effect = {
			add_equipment_bonus = {
				name = GER_u_boat_efforts
				bonus = {
					ship_hull_submarine = {
						naval_speed = 0.05 #WARNING! If you change this value, you need to update GER_submarine_max_speed_small_tt
					}
				}
			}
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_add_or_modify_wunderwaffen = yes
		add_to_variable = { 
			GER_wunderwaffen_sp_tag_submarine_speed_factor = GER_wunderwaffe_research_speed_bonus
			tooltip = sp_tag_submarine_speed_factor_tt
		}
		
		custom_effect_tooltip = generic_skip_one_line_tt

		if = {
			limit = {
				NOT = { has_dlc = "Arms Against Tyranny" }
			}
			if = {
				limit = {
					has_idea = GER_hdw
				}
				swap_ideas = {
					remove_idea = GER_hdw
					add_idea = GER_hdw_improved
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = GER_hdw
						add_idea = GER_hdw_improved
					}
				}
			}
		}
		else = {
			mio:GEK_hdw_organization = {
				add_mio_size = 1
				add_mio_funds_gain_factor = 0.25
				add_mio_research_bonus = 0.05

				unlock_mio_trait_tooltip = GER_mio_trait_ocean_u_boats
				unlock_mio_trait_tooltip = GER_mio_trait_kilian_submarine_bunker
				unlock_mio_trait_tooltip = GER_mio_trait_atlantic_raiders
			}
			mio:GEK_blohm_und_voss_organization = {
				unlock_mio_trait_tooltip = GER_mio_trait_u_boat_yards
			}
		}
	}
}

shared_focus = {
	id = GEAF_unrestricted_convoy_raiding
		text = GER_unrestricted_convoy_raiding
	icon = GFX_goal_generic_navy_battleship
	prerequisite = { focus = GEAF_panzerschiff_raiders focus = GEAF_u_boat_efforts }

	x = 1
	y = 1
	relative_position_id = GEAF_panzerschiff_raiders
	cost = 10
	available = {
	}

	search_filters = {}

	completion_reward = {
		if = {
			limit = {
				NOT = { has_completed_focus = GEAF_plan_z }
			}
			custom_effect_tooltip = GER_unlock_plan_z_tt
		}

		custom_effect_tooltip = generic_skip_one_line_tt

		GER_modify_navy_modifier = yes
		add_to_variable = { 
			GER_military_naval_defense_factor = 0.05
			tooltip = naval_defense_factor_tt
		}
		add_to_variable = { 
			GER_military_convoy_raiding_efficiency_factor = 0.05
			tooltip = convoy_raiding_efficiency_factor_tt
		}
		if = {
			limit = {
				NOT = {
					has_completed_focus = GEAF_panzerschiff_raiders
					has_completed_focus = GEAF_u_boat_efforts
				}
			}
			custom_effect_tooltip = GER_with_panzerschiff_completed_tt
			add_to_variable = { 
				GER_military_screening_without_screens = 0.1
				tooltip = screening_without_screens_tt
			}
			custom_effect_tooltip = GER_with_u_boat_efforts_completed_tt
			custom_effect_tooltip = GER_submarine_max_speed_small_tt
		}
		else_if = {
			limit = {
				has_completed_focus = GEAF_panzerschiff_raiders
			}
			add_to_variable = { 
				GER_military_screening_without_screens = 0.1
				tooltip = screening_without_screens_tt
			}
		}
		else_if = {
			limit = {
				has_completed_focus = GEAF_u_boat_efforts
			}
			custom_effect_tooltip = GER_submarine_max_speed_small_tt
			hidden_effect = {
				add_equipment_bonus = {
					name = GER_unrestricted_convoy_raiding
					bonus = {
						ship_hull_submarine = {
							naval_speed = 0.05 #WARNING! If you change this value, you need to update GER_submarine_max_speed_small_tt
						}
					}
				}
			}
		}	
	}
}

shared_focus = {
	id = GEAF_seeherrschaft
		text = GER_seeherrschaft 
	icon = GFX_focus_GER_seeherrschaft
	prerequisite = { focus = GEAF_high_seas_fleet }
	prerequisite = { focus = GEAF_unrestricted_convoy_raiding }
	
	x = 0
	y = 1
	relative_position_id = GEAF_atlantic_naval_dominance

	cost = 5
	available = {
	}

	search_filters = { FOCUS_FILTER_MILITARY_CHARACTER }

	completion_reward = {
		random_navy_leader = {
			limit = {
				NOT = { has_trait = blue_water_expert }
			}
			add_trait = { trait = blue_water_expert }
		}
		random_navy_leader = {
			limit = {
				NOT = { has_trait = blue_water_expert }
			}
			add_trait = { trait = blue_water_expert }
		}

		add_ideas = GER_seeherrschaft_ns
	}
}

